<!DOCTYPE html>
<html lang="en">

<head>

    <title>Server Provisioning and the /opt Directory</title>

    <!-- Meta Tags Start -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="title" content="Server Provisioning and the /opt Directory">
    <meta name="description" content="An overview of how we provision and organize code and data on servers using the UNIX /opt directory.">
    <meta property="og:locale" content="en_US" />
    <meta property="og:description" content="An overview of how we provision and organize code and data on servers using the UNIX /opt directory.">
    <meta property="og:image" name="image" content="https://monadical.com/static/opt-directory.jpg">
    <meta property="og:title" content="Server Provisioning and the /opt Directory">
    <meta property="og:type" content="article">
    <meta property="og:url" content=https://monadical.com/posts/intro-to-opt-directory.html />
    <meta property="og:site_name" content="Monadical Consulting" />

    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:description" content="An overview of how we provision and organize code and data on servers using the UNIX /opt directory.">
    <meta property="twitter:image" content="https://monadical.com/static/opt-directory.jpg">
    <meta property="twitter:site" content="@MonadicalHQ">
    <meta property="twitter:title" content="Server Provisioning and the /opt Directory">
    <meta property="twitter:url" content=https://monadical.com/posts/intro-to-opt-directory.html />
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
    <!-- Meta Tags End -->

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans|Ubuntu" type="text/css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fjalla+One" type="text/css">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&display=swap" type="text/css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/font-hack/2.020/css/hack.min.css" type="text/css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
        type="text/css">

    <link rel="stylesheet" href="/static/bootstrap4-pleasant.min.css" type="text/css">
    <link rel="stylesheet" href="/static/core/css/base.css" type="text/css">

    <link rel="canonical" href="https://monadical.com/posts/intro-to-opt-directory.html" />

    <link rel="apple-touch-icon" sizes="76x76" href="/static/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/favicon/favicon-16x16.png">
    <link rel="mask-icon" href="/static/favicon/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/atom-one-light.min.css">



    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous">
        </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous">
        </script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"
        integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous">
        </script>

    
<link rel="stylesheet" href="/static/core/css/index.css">
<link rel="stylesheet" href="/static/core/css/post.css">

</head>

<body>
    
    <header>
        
        

        <div id="header-container" class="container">
            <nav class="navbar navbar-expand-lg navbar-dark">
                
                <a class="navbar-brand" id="monadical-brand" href="/index.html">
                    <img srcset="/static/core/img/logo@3x.png 3x,
                                 /static/core/img/logo@2x.png 2x"
                         src="/static/core/img/logo.png"
                         id="brand-img" />
                </a>
                

                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <div class="navbar-content-container">
                        <ul class="navbar-nav">
                            
                                
                                    <li class="nav-item">
                                        <a class="nav-link "
                                           href="/portfolio.html">Portfolio</a>
                                    </li>
                                
                            
                                
                                    <div class="nav-item dropdown">
                                        <button class="nav-link btn-link dropdown-toggle" type="button"
                                            id="dropdownservicesButton" data-toggle="dropdown" aria-haspopup="true"
                                            aria-expanded="false">
                                            Services
                                        </button>
                                        <div class="dropdown-menu" aria-labelledby="dropdownservicesButton">
                                            
                                                <a class="dropdown-item nav-link"
                                                href="/ai-services.html">AI</a>
                                            
                                            <a class="dropdown-item nav-link"
                                                href="/services.html">Web Dev</a>
                                        </div>
                                    </div>
                                
                            
                                
                                    <li class="nav-item">
                                        <a class="nav-link "
                                           href="/about.html">About Us</a>
                                    </li>
                                
                            
                                
                                    <li class="nav-item">
                                        <a class="nav-link "
                                           href="/blog.html">Insights</a>
                                    </li>
                                
                            
                            <li class="nav-item">
                                <a class="nav-link"
                                   href="/contact-us.html">LET'S TALK</a>
                            </li>
                        </ul>

                    </div>
                </div>
            </nav>
        </div>
    </header>
    


    
    <article>
        
    <div id="post-content">
        <div class="container">
            <img class="cloud-img-left" src="/static/core/img/img-team-013.png">
            <img class="tentacle-img-right" id="post-tentacle-right" src="/static/core/img/img-home-010.png">
            <img class="cube-img-left" id="post-cube-left" src="/static/core/img/img-home-002.png">
            <img class="cloud-img-right" src="/static/core/img/img-team-014.png">
            <div class="row">
                <div class="col">
                    
                        <article class="article-content">
                            <!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="mobile-web-app-capable" content="yes">
    
    
    <meta name="description" content="&lt;center&gt;  # An Introduction to the /opt Directory  *Originally published 2018-09-10 by Nick Sweeting">
    
    
    
    <meta property="og:title" content="An Introduction to the /opt Directory - HedgeDoc">
    
    
    
    <meta property="og:type" content="website">
    
    <meta property="og:image" content="https://docs.monadical.com/icons/android-chrome-512x512.png">
    <meta property="og:image:alt" content="HedgeDoc logo">
    <meta property="og:image:type" content="image/png">
    
    <base href="">
    <title>An Introduction to the /opt Directory - HedgeDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="https://docs.monadical.com/icons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://docs.monadical.com/icons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://docs.monadical.com/icons/favicon-16x16.png">
<link rel="manifest" href="https://docs.monadical.com/icons/site.webmanifest">
<link rel="mask-icon" href="https://docs.monadical.com/icons/safari-pinned-tab.svg" color="#b51f08">
<link rel="shortcut icon" href="https://docs.monadical.com/icons/favicon.ico">
<meta name="apple-mobile-web-app-title" content="HedgeDoc - Ideas grow better together">
<meta name="application-name" content="HedgeDoc - Ideas grow better together">
<meta name="msapplication-TileColor" content="#b51f08">
<meta name="msapplication-config" content="https://docs.monadical.com/icons/browserconfig.xml">
<meta name="theme-color" content="#b51f08">

    <link rel="stylesheet" href='https://docs.monadical.com/build/emojify.js/dist/css/basic/emojify.min.css'>
    <link href="https://docs.monadical.com/build/font-pack.4362583c9249021b5028.css" rel="stylesheet"><link href="https://docs.monadical.com/build/2.15c517ea2148f55c8206.css" rel="stylesheet"><link href="https://docs.monadical.com/build/3.ec6e7d6280fcd73e729d.css" rel="stylesheet"><link href="https://docs.monadical.com/build/pretty-styles-pack.2fb0d01138de2df6de0a.css" rel="stylesheet"><link href="https://docs.monadical.com/build/pretty-styles.8aa1888af7df52aee395.css" rel="stylesheet"><link href="https://docs.monadical.com/build/1.1666d9d869a0532d9bce.css" rel="stylesheet"><link href="https://docs.monadical.com/build/pretty.0424d40e7df68caf04c5.css" rel="stylesheet">
</head>

<body style="display:none;">
    <div class="ui-infobar container-fluid unselectable hidden-print">
        <small>
            <span>
                
                    <span class="ui-lastchangeuser">&thinsp;<i class="ui-user-icon small" style="background-image: url(https://cdn.libravatar.org/avatar/aa8b1ebe25440bd38748639eebdc6eaf?default=identicon&s=96);" data-toggle="tooltip" data-placement="right" title="nick"></i></span>
                
                &nbsp;<span class="text-uppercase ui-status-lastchange"></span>
                <span class="ui-lastchange text-uppercase" data-createtime="Thu Feb 14 2019 00:27:53 GMT+0000 (Coordinated Universal Time)" data-updatetime="Sat Feb 24 2024 07:47:57 GMT+0000 (Coordinated Universal Time)"></span>
            </span>
            <span class="pull-right">13207 views <a href="https://docs.monadical.com/#" class="ui-edit" title="Edit this note"><i class="fa fa-fw fa-pencil"></i></a></span>
            <br>
            
        </small>
    </div>
    <div id="doc" class="container markdown-body" >&lt;center&gt;

# An Introduction to the /opt Directory

*Originally published 2018-09-10 by Nick Sweeting on [docs.sweeting.me/s/blog](https://docs.sweeting.me/s/blog).*

&lt;/center&gt;

This post is about standardizing your code, data, and config folder locations on your servers as a sysadmin by using the `/opt` directory on UNIX-style systems.

This post assumes you are comfortable with basic UNIX shell commands, `ssh`, `rsync`, `etc` files, and `bash` syntax.  It also assumes you have some prior experience setting up services like web backends and databses on *nix systems.

---


When setting up a new machine, were do you usually put the code you want to have running on the machine? What about the dotfiles and etc files? Do you use Ansible, Puppet, Chef, etc?  Do you need to install packages and setup the machine?

But the real question is:  
**Do you have a standard way to do this for every machine that you set up?**

The core things to keep track of in each project are: 
 - code
 - config
 - data
 - executables


Consistency across your environments will help you provision and debug setups efficiently, no matter which machine you&#39;re on.  The most effective way to have consistency is to write down your process, and stick to it.  With a written process you now have a declarative description of the setup process that you can follow every time you set up a new machine.  It also serves as documentation if you ever need to remember how something was set up.

Try to reduce turing-completeness in your setup wherever possible.  i.e. prefer yaml/json/ansible/docker configs describing the desired outcome to Puppet/Chef/bash scripts that imperatively run steps to get there.

The documentation of your process can be broken down into &#34;standards&#34;, think of them like RFCs describing a particular aspect of your sysadmin duties, except the standards committe only has one member: you!

&gt; *For a similar approach, see: [The Twelve-Factor App Methodology](https://12factor.net)*

With that in mind as you read ahead, I encourage you to draft out your own &#34;folder locations standard&#34; that suits your needs, and use it when you create new projects to deploy to your servers.

## Start Simple: Where should we put our project root?

One of the best things to standardize early on is where you locate your projects on your servers.

Luckily UNIX can help us out here, there are already some standard folders given to us, like `/opt`, `/etc`, `/var`, `/bin`.  You might know that `/etc` is for configuration files, but do you know what all the other ones are for?

One particularly useful one for us today is `/opt`.

&gt; `/opt`: **[Add-on application software packages](http://www.pathname.com/fhs/pub/fhs-2.3.html)**
&gt; For the installation of add-on application software packages.
&gt; ___
&gt; Generally, all data required to support a package on a system must be present within /opt/&lt;package&gt;, including files intended to be copied into /etc/opt/&lt;package&gt; and /var/opt/&lt;package&gt; as well as reserved directories in /opt.

Following the spirit of that piece of UNIX philosophy, I like to put all my projects inside `/opt/&lt;project-name&gt;`.

For example, if I were setting up a wordpress site `myblog.com`, I would put all the files here:

```
/opt/
    myblog.com/
        wordpress/
            index.php
            wp-config.php
            ...
```

## Where should we put config?

I really like to keep all the files relevant to a certain project in one place, and luckily our `/opt` structure above lends itself well to that, we can put our config files in our `/opt/&lt;projct-name&gt;/etc` folder, and symlink them into place in the system `/etc` folders under the same paths.

```
/opt/
    myblog.com/
        ...
        etc/
            nginx/
                sites-enabled/
                    myblog.com.conf
                certs/
                    myblog.com.crt
                    myblog.com.key
            mysql/
                my.conf
            cron.d/
                update_wordpress
```

## What about application state?

Our example wordpress site likely has a database, some logs, and other mutable state such as user uploaded-files.  We can keep those in our project under a `data/` directory:

```
/opt/
    myblog.com/
        ...
        data/
            wp-content/
                # user-installed plugins, themes, and uploaded files
            database/
                # mysql data folder
            logs/
                access.log
                error.log
                database.log

        wordpress/
            wp-content/  -&gt; ../../data/wp-content   (symlink)
            ...
```

You&#39;ll have to put these logfile locations into your `my.cnf` and `nginx.conf` files to get those processes writing data to this custom location instead of the system defaults.

Symlinks are your friend, you can always symlink `/var/log/nginx/access.log` into your `opt` folder if you want to have logfiles accessible from the system default locations.

If you&#39;d like to follow strict UNIX philosophy you can symlink `/var/opt/&lt;project-name&gt;` to your opt data folder: http://www.pathname.com/fhs/pub/fhs-2.3.html#VAROPTVARIABLEDATAFOROPT

## Executables and helpers: how do we administer our app?
    
In my projects I like to create 5 standard executables for the most common admin tasks:

```
/opt/
    myblog.com/
        ...
        bin/
            setup.sh
            start.sh
            stop.sh
            backup.sh
            update.sh
```

- `start.sh`: starts the app and all its necessary services e.g. `systemctl nginx start`
- `stops.sh`: stops the app cleanly and ends all processes
- `setup.sh`: installs any necessary packages and symlinks all our `/opt/&lt;project-name&gt;` files into place on the host system
- `backup.sh`: dumps any running databases or message queues to static files in `data/` which are safe to copy as a snapshot-in-time backup
- `update.sh`: pulls a the latest version of the code and does any package updates/migrations necessary

These executables are useful in many contexts, you can call them from cron jobs, use them in deploy scripts, or just call them manually when SSH&#39;ed into the server and debugging stuff.

## Tying it all together

I like to put a small README.md in the root of each project explaining the setup and how to do common admin tasks.

Isn&#39;t this starting to  look suspicously like a typical github project dir?  We can actually add this whole folder into git or other version control, as long as we exclude the big mutable `data` folder.  This lets us track our folder structure, config files, and everything else in version control so we can revert our project to any given version.

Our final folder structure looks like this:

```
/opt/
    myblog.com/
        .git
        .gitignore
        README.md
        bin/
            setup.sh
            start.sh
            stop.sh
            backup.sh
            update.sh
        etc/
            nginx/		 ...
            mysql/		 ...
            cron.d/		 ...
            ...
        wordpress/
            index.php
            wp-config.php
            ...
        data/
            wp-content/  ...
            database/    ...
            logs/        ...
```

## Docker-based projects

Luckily docker-based projects work really well with this folder layout because we can mount the `data/` directory as a volume in our images:

```
/opt/
    myblog.com/
        docker-compose.yml
        wordpress/
            Dockerfile
            ...
        data/     ...
        bin/      ...
```

For a docker project, the `start` and `stop` helper bin files could just be shortcuts for `docker-compose up -d` and `docker-compose down`, and `update` could be as simple as `git pull; docker-compose pull` to get a new version of the docker-compose file and docker images.

## Multiple projects on a server

If you have multiple services running on a server you can put them all into `/opt` and use an init system to orchestrate starting and stopping them.  Which init system you choose is up to you, but personally I like to use supervisord, a simple python-based init system.

```
/opt/
    supervisord.conf
    myblog.com/          ...
    otherblog.com/       ...
    vpn.mysite.com/      ...
    mail.mysite.com/     ...
```

An example `supervisord.conf` might look like this:

```bash
[program:myblog.com]
command=/opt/myblog.com/bin/start
stderr_logfile=/opt/myblog.com/data/logs/wordpress.log
user=www-data

[program:otherblog.com]
command=/opt/otherblog.com/bin/start
stderr_logfile=/opt/otherblog.com/data/logs/wordpress.log
user=www-data

...
```

Then you can start and stop various projects by doing this:
```
supervisorctl start myblog.com
supervisorctl stop myblog.com
supervisorctl restart otherblog.com
...
```

## Backups: Is tar+gzipping the whole folder enough?

You can tar+gzip/snapshot the whole folder, however that&#39;s not the best idea if you have running stateful services like databases or message queues like Redis.  Copying a database&#39;s raw data folder while the service is running can create a backup that&#39;s inconsistent, since the files may be changing while it&#39;s copying.  For small projects you can create a helper script which runs to export any database or message queues that are currently running before you tar+gzip the whole folder:


`/opt/&lt;project&gt;/bin/backup`:
```bash
# optionally stop the service before dumping state
./stop

# dump mysql db to file
mysqldump -u backups wp_myblog | gzip -9 &gt; ../data/database/dump.sql.gz

# or dump postgres db to file
pg_dump wp_myblog | gzip -9 &gt; ../data/database/dump.sql.gz

# dump redis to file
redis-cli SAVE
gzip -9 &lt; /var/lib/redis/dump.rdb &gt; ../data/redis/dump.rdb.gz

```

## Offsite backups are a piece of cake now

When preparing to backup an entire project to an offiste backups location, you can do it in two steps like so:

```bash
ssh myblog.com /opt/myblog.com/bin/backup
rsync -r --archive --progress myblog.com:/opt/myblog.com/ /Backups/myblog.com
```

1. Freeze the state of the app in time by dumping any running services to dump files
2. rsync the entire project folder, with everything inside: data, config, code, etc.

Now `/Backups/myblog.com` contains a perfect replica of myblog.com at that point in time. It contains everything you would need to deploy that project on a new server.

## My 2 Cents

This particular folder structure outlined above may not float your boat, maybe you prefer to keep everything in `/tank` or manage backups in a different way.  Thats ok!

**Having** a standard, is often more important than **which** standard you pick.

The core things to keep track of are: `code`, `config`, `data`,  `backups`, and `executables`.

As long as your have these files in predictable places, and your projects have a consitent structure across different machines, you&#39;ll be able to debug and manage everything simply.

Danger lies in the unexpected.

---

Further reading:
    
 - https://grahamc.com/blog/erase-your-darlings
 - https://12factor.net</div>
    <div class="ui-toc dropup unselectable hidden-print" style="display:none;">
        <div class="pull-right dropdown">
            <a id="tocLabel" class="ui-toc-label btn btn-default" data-toggle="dropdown" href="https://docs.monadical.com/#" role="button" aria-haspopup="true" aria-expanded="false" title="Table of content">
                <i class="fa fa-bars"></i>
            </a>
            <ul id="ui-toc" class="ui-toc-dropdown dropdown-menu" aria-labelledby="tocLabel">
            </ul>
        </div>
    </div>
    <div id="ui-toc-affix" class="ui-affix-toc ui-toc-dropdown unselectable hidden-print" data-spy="affix" style="display:none;"></div>
    
</body>

</html>
<script src="https://docs.monadical.com/js/mathjax-config-extra.js"></script>
<script src="https://docs.monadical.com/build/MathJax/MathJax.js" defer></script>
<script src="https://docs.monadical.com/build/MathJax/config/TeX-AMS-MML_HTMLorMML.js" defer></script>
<script src="https://docs.monadical.com/build/MathJax/config/Safe.js" defer></script>
<script src="https://docs.monadical.com/config"></script><script src="https://docs.monadical.com/build/vendors~common.0252483117be96f00e28.js" defer="defer"></script><script src="https://docs.monadical.com/build/common.0c0667a7b004f0fcfd13.js" defer="defer"></script><script src="https://docs.monadical.com/build/vendors~cover~cover-pack~index~index-pack~pretty~pretty-pack~slide~slide-pack.89ccd89a09f629d94d5c.js" defer="defer"></script><script src="https://docs.monadical.com/build/vendors~index~index-pack~pretty~pretty-pack~slide~slide-pack.ab8ca16a9a0e12c92d31.js" defer="defer"></script><script src="https://docs.monadical.com/build/pretty-pack.c2685453bcc85995cfc9.js" defer="defer"></script>



                        </article>
                    
                </div>
            </div>
        </div>
        <div class="container">
            <div class="authorbox">
                
                    <div class="authorbox__content">
                        <img src="/static/nick.jpg" alt="Nick Sweeting"/>
                        <div>
                            <h3><a href="https://twitter.com/theSquashSH" target="_blank" rel="noopener">Nick Sweeting</a></h3>
                            <h5> is a Co-Founder of Monadical</h5>
                        </div>
                    </div>
                
            </div>
            <div class="recent-posts">
                <h4>Recent posts</h4>
                <ul>
                    
                        
                            <li><a href="/posts/so-you-want-to-build-a-social-network.html">So you want to build a social network?</a></li>
                        
                    
                        
                            <li><a href="/posts/mastering-project-estimation.html">Mastering Project Estimation</a></li>
                        
                    
                        
                            <li><a href="/posts/typescript-validators-jamboree.html">Typescript Validators Jamboree</a></li>
                        
                    
                        
                            <li><a href="/posts/if-else-1.html">Mindfulness in Typescript code branching. Exhaustiveness, pattern matching, and side effects</a></li>
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    <li>
                        <a href="/blog.html">
                            View more posts...
                        </a>
                    </li>
                </ul>
            </div>
            <script src="https://utteranc.es/client.js"
                repo="Monadical-SAS/monadical.com"
                issue-term="pathname"
                label="blog"
                theme="github-light"
                crossorigin="anonymous"
                async>
            </script>
            <center>
                <a href="#post-content" class="back-to-top">
                    Back to top <i class="fa fa-arrow-up"></i>
                </a>
            </center>

            <!-- Final CTA -->
<div class="row final-cta">
  <div class="col-12 text-center">
      <h2>Let's <span class="highlight">transform</span> your organization.</h2>
      <a href="/contact-us.html" class="btn btn-primary cta-button">BOOK A FREE AI STRATEGY CALL</a>
  </div>
</div>
        </div>
        <script type="text/javascript" id="MathJax-script" async
          src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
        </script>
        <script>
            // hide the table of contents nav when you scroll down past the end
            $(window).scroll(function() {
                const pos = $(window).scrollTop()
                const threshold = $('.authorbox').position().top - 250
                $('#ui-toc-affix').css({
                    opacity: (pos > threshold) ? 0 : 1
                });
                $('.pull-right').css({
                    opacity: (pos > threshold) ? 0 : 1
                });
            });
            document.addEventListener('DOMContentLoaded', () => {
                document.querySelector('#ui-toc-affix > div.toc-menu > a.go-to-bottom').innerHTML = 'Go to comments'
                document.querySelector('#ui-toc-affix > div.toc-menu > a.go-to-bottom').href = '#post-footer'
                document.querySelector('#ui-toc-affix > div.toc-menu > a.back-to-top').innerHTML = 'Go to top'
                document.querySelector('#ui-toc-affix > div.toc-menu > a.back-to-top').href = '#post-content'
                // Popup toc for samll screens
                document.querySelector('#ui-toc > div.toc-menu > a.go-to-bottom').innerHTML = 'Go to comments'
                document.querySelector('#ui-toc > div.toc-menu > a.go-to-bottom').href = '#post-footer'
                document.querySelector('#ui-toc > div.toc-menu > a.back-to-top').innerHTML = 'Go to top'
                document.querySelector('#ui-toc > div.toc-menu > a.back-to-top').href = '#post-content'

                // GET the original article source so they get they bump the view counter
                fetch('https://docs.monadical.com/s/an-intro-to-the-opt-directory', {mode: 'no-cors'})

                // remove undesired css that break styles
                setTimeout(() => document.querySelector("link[href*='pretty-styles-pack']").remove(), 500)
            })

            $('[href$="bootstrap.min.css"]').attr('disabled', 'disabled')
        </script>
        <script>
            function setOpacity(){
                const maxWidth = 1140;
                const width = $(window).width();
                $('#post-cube-left').css({
                    opacity: (width < maxWidth) ? 0.1 : 0.6
                });
                $('#post-tentacle-right').css({
                    opacity: (width < maxWidth) ? 0.1 : 0.6
                });
            }

            $(document).ready(setOpacity);
            $(window).resize(setOpacity);

            // Remove undesired bootstrap styles
            setTimeout(() => {
                $('[href$="bootstrap.min.css"]').attr('disabled', 'disabled');
                document.querySelector("link[href*='pretty-styles-pack']")?.remove();
            }, 500);
        </script>
    </div>

    </article>
    

    
    <footer>
        
        
        <div class="container footer">
            
            <div class="row">
                <div class="col-12 col-md-4">
                    <ul>
                        <li><b title="Montréal, Canada">Montréal</b></li>
                        <li><b title="Vancouver, Canada">Vancouver</b></li>
                        <li><b title="Medellín, Colombia">Medellín</b></li>
                        <li><b title="Cali, Colombia">Cali</b></li>
                    </ul>
                </div>
                <div class="col-12 col-md-3">
                    <ul>
                        <li>
                            <b>Monadical</b>
                        </li>
                        <a href="/blog.html">Blog</a>
                        <li><a href="/services.html">Services</a></li>
                        <li><a href="/projects.html">Projects</a></li>
                        <li><a href="/privacy.html">Privacy Policy</a></li>
                    </ul>
                </div>
                <div class="col-12 col-md-3">
                    <ul>
                        <li>
                            <b>About Us</b>
                        </li>
                        <li><a href="/about.html">About</a></li>
                        <li><a href="/team.html">Team</a></li>
                        <li><a href="/principles.html">Principles</a></li>
                    </ul>
                </div>
                <div class="col-12 col-md-2">
                    <ul>
                        <li>
                            <b>Contact Us</b>
                        </li>
                        <li><a href="https://cal.com/monadical/widget">Get a Quote</a></li>
                        <li><a href="https://careers.monadical.com/">Careers</a></li>
                        <li><a href="/contact-us.html">Contact us</a></li>
                    </ul>
                </div>
            </div>
            <div class="row social">
                <div class="col-12">
                    <ul>
                        <li>
                            <a href="https://twitter.com/MonadicalHQ" title="Monadical Twitter" target="_blank"
                                rel="noopener">
                                <i class="fa fa-twitter"></i>
                            </a>
                        </li>
                        <li>
                            <a href="https://facebook.com/monadical" title="Monadical Facebook" target="_blank"
                                rel="noopener">
                                <i class="fa fa-facebook"></i>
                            </a>
                        </li>
                        <li>
                            <a href="https://linkedin.com/company/monadical" title="Monadical LinkedIn" target="_blank"
                                rel="noopener">
                                <i class="fa fa-linkedin"></i>
                            </a>
                        </li>
                        <li>
                            <a href="https://github.com/Monadical-SAS" title="Monadical Github" target="_blank"
                                rel="noopener">
                                <i class="fa fa-github"></i>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            
        </div>
        
        
    </footer>
    

    <script type="text/javascript">
        // hide all the tags containing fake contact info that are there to throw off scrapers
        // most scrapers dont run JS, so this fairly effectively masks our real info from bots
        for (const elem of document.querySelectorAll('.please-scrape-this-fake-info')) {
            elem.style.display = 'none'
        }
    </script>

    <script src="/static/squares.js"></script>


    
    

    <!-- Smooth Scroll to Anchor Links Animation -->
    <script>
        function getUnicodeHash(reference) {
            return "#\\" + reference.codePointAt(1).toString(16) + " " + reference.slice(2)
        }
        function smoothScroll(e) {
            const hash = decodeURIComponent(this.hash)
            e.preventDefault()
            e.stopPropagation()

            console.log('Scrolling to', this.getAttribute('href'))
            let reference = this.getAttribute('href')
            if (reference.match(/^#[0-9]+/)) {
                reference = getUnicodeHash(reference)
            }
            document.querySelector(reference).scrollIntoView({
                behavior: 'smooth'
            });
            setTimeout(() => {
                window.location.hash = hash
            }, 500/*arbitrary value, not standartized*/);
        }
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('a[smoothhashscroll]').forEach(elem => {
                /*
                   this code drops all the event listeners that were attached so far;
                   we need to do it here because the event listeners themselves are not under control of this repo
                   this content together with js files (that are executed) is presumably downloaded from hedgedoc
                   this is a very hacky hack, we shall negate it "as soon as we can"
                */
                elem.parentNode.outerHTML = elem.parentNode.outerHTML
            })
            document.querySelectorAll('a[href^="#"], a[smoothhashscroll]').forEach(anchor => {
                anchor.addEventListener('click', smoothScroll);
            });
        })
    </script>

    <!-- Matomo -->
    <script type="text/javascript">
        var _paq = window._paq || [];
        /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
        _paq.push(["setCookieDomain", "*.monadical.com"]);
        _paq.push(['trackPageView']);
        _paq.push(['enableLinkTracking']);
        // accurately measure the time spent in the visit
        _paq.push(['enableHeartBeatTimer']);
        (function () {
            var u = "//analytics.zervice.io/";
            _paq.push(['setTrackerUrl', u + 'matomo.php']);
            _paq.push(['setSiteId', '12']);
            var d = document,
                g = d.createElement('script'),
                s = d.getElementsByTagName('script')[0];
            g.type = 'text/javascript';
            g.async = true;
            g.defer = true;
            g.src = u + 'matomo.js';
            s.parentNode.insertBefore(g, s);
        })();
    </script>
    <!-- End Matomo Code -->

    <!-- Highlight Code -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
    <!-- End Highlight Code -->
</body>

</html>