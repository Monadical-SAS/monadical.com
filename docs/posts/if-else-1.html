<!DOCTYPE html>
<html lang="en">

<head>

    <title>Mindfulness in Typescript code branching. Exhaustiveness, pattern matching, and side effects</title>

    <!-- Meta Tags Start -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="title" content="Mindfulness in Typescript code branching. Exhaustiveness, pattern matching, and side effects">
    <meta name="description" content="1/2: “Exhaustive absurd”, Or how to if/else">
    <meta property="og:locale" content="en_US" />
    <meta property="og:description" content="1/2: “Exhaustive absurd”, Or how to if/else">
    <meta property="og:image" name="image" content="https://monadical.com/static/else.png">
    <meta property="og:title" content="Mindfulness in Typescript code branching. Exhaustiveness, pattern matching, and side effects">
    <meta property="og:type" content="article">
    <meta property="og:url" content=https://monadical.com/posts/if-else-1.html />
    <meta property="og:site_name" content="Monadical Consulting" />

    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:description" content="1/2: “Exhaustive absurd”, Or how to if/else">
    <meta property="twitter:image" content="https://monadical.com/static/else.png">
    <meta property="twitter:site" content="@MonadicalHQ">
    <meta property="twitter:title" content="Mindfulness in Typescript code branching. Exhaustiveness, pattern matching, and side effects">
    <meta property="twitter:url" content=https://monadical.com/posts/if-else-1.html />
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
    <!-- Meta Tags End -->

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans|Ubuntu" type="text/css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fjalla+One" type="text/css">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&display=swap" type="text/css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/font-hack/2.020/css/hack.min.css" type="text/css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
        type="text/css">

    <link rel="stylesheet" href="/static/bootstrap4-pleasant.min.css" type="text/css">
    <link rel="stylesheet" href="/static/core/css/base.css" type="text/css">

    <link rel="canonical" href="https://monadical.com/posts/if-else-1.html" />

    <link rel="apple-touch-icon" sizes="76x76" href="/static/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/favicon/favicon-16x16.png">
    <link rel="mask-icon" href="/static/favicon/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/atom-one-light.min.css">



    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous">
        </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous">
        </script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"
        integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous">
        </script>

    
<link rel="stylesheet" href="/static/core/css/index.css">
<link rel="stylesheet" href="/static/core/css/post.css">

</head>

<body>
    
    <header>
        
        

        <div id="header-container" class="container">
            <nav class="navbar navbar-expand-lg navbar-dark">
                
                <a class="navbar-brand" id="monadical-brand" href="/index.html">
                    <img srcset="/static/core/img/logo@3x.png 3x,
                                 /static/core/img/logo@2x.png 2x"
                         src="/static/core/img/logo.png"
                         id="brand-img" />
                </a>
                

                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <div class="navbar-content-container">
                        <ul class="navbar-nav">
                            
                                
                                    <li class="nav-item">
                                        <a class="nav-link "
                                           href="/index.html">Home</a>
                                    </li>
                                
                            
                                
                                    <li class="nav-item">
                                        <a class="nav-link "
                                           href="/portfolio.html">Portfolio</a>
                                    </li>
                                
                            
                                
                                    <div class="nav-item dropdown">
                                        <button class="nav-link btn-link dropdown-toggle" type="button"
                                            id="dropdownservicesButton" data-toggle="dropdown" aria-haspopup="true"
                                            aria-expanded="false">
                                            Services
                                        </button>
                                        <div class="dropdown-menu" aria-labelledby="dropdownservicesButton">
                                            
                                                <a class="dropdown-item nav-link"
                                                href="/ai-services.html">AI</a>
                                            
                                            <a class="dropdown-item nav-link"
                                                href="/services.html">Web Dev</a>
                                        </div>
                                    </div>
                                
                            
                                
                                    <li class="nav-item">
                                        <a class="nav-link "
                                           href="/about.html">About Us</a>
                                    </li>
                                
                            
                                
                                    <li class="nav-item">
                                        <a class="nav-link" target="_blank"
                                        href="https://careers.monadical.com/">Careers</a>
                                    </li>
                                
                            
                                
                                    <li class="nav-item">
                                        <a class="nav-link "
                                           href="/blog.html">Insights</a>
                                    </li>
                                
                            
                            <li class="nav-item">
                                <a class="nav-link"
                                   href="/contact-us.html">LET'S TALK</a>
                            </li>
                        </ul>

                    </div>
                </div>
            </nav>
        </div>
    </header>
    


    
    <article>
        
    <div id="post-content">
        <div class="container">
            <div class="row">
                <div class="col">
                    
                        <article class="article-content">
                            <!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="mobile-web-app-capable" content="yes">
    
    
    <meta name="description" content="In-depth analysis of if/else.">
    
    
    
    <meta property="og:title" content="Mindfulness in Typescript code branching. Exhaustiveness, pattern matching, and side effects - HedgeDoc">
    
    
    <meta property="og:description" content="In-depth analysis of if/else.">
    
    
    <meta property="og:type" content="website">
    
    <meta property="og:image" content="https://docs.monadical.com/icons/android-chrome-512x512.png">
    <meta property="og:image:alt" content="HedgeDoc logo">
    <meta property="og:image:type" content="image/png">
    
    <base href="">
    <title>Mindfulness in Typescript code branching. Exhaustiveness, pattern matching, and side effects - HedgeDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="https://docs.monadical.com/icons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://docs.monadical.com/icons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://docs.monadical.com/icons/favicon-16x16.png">
<link rel="manifest" href="https://docs.monadical.com/icons/site.webmanifest">
<link rel="mask-icon" href="https://docs.monadical.com/icons/safari-pinned-tab.svg" color="#b51f08">
<link rel="shortcut icon" href="https://docs.monadical.com/icons/favicon.ico">
<meta name="apple-mobile-web-app-title" content="HedgeDoc - Ideas grow better together">
<meta name="application-name" content="HedgeDoc - Ideas grow better together">
<meta name="msapplication-TileColor" content="#b51f08">
<meta name="msapplication-config" content="https://docs.monadical.com/icons/browserconfig.xml">
<meta name="theme-color" content="#b51f08">

    <link rel="stylesheet" href='https://docs.monadical.com/build/emojify.js/dist/css/basic/emojify.min.css'>
    <link href="https://docs.monadical.com/build/font-pack.4362583c9249021b5028.css" rel="stylesheet"><link href="https://docs.monadical.com/build/2.15c517ea2148f55c8206.css" rel="stylesheet"><link href="https://docs.monadical.com/build/3.ec6e7d6280fcd73e729d.css" rel="stylesheet"><link href="https://docs.monadical.com/build/pretty-styles-pack.2fb0d01138de2df6de0a.css" rel="stylesheet"><link href="https://docs.monadical.com/build/pretty-styles.8aa1888af7df52aee395.css" rel="stylesheet"><link href="https://docs.monadical.com/build/1.1666d9d869a0532d9bce.css" rel="stylesheet"><link href="https://docs.monadical.com/build/pretty.0424d40e7df68caf04c5.css" rel="stylesheet">
</head>

<body style="display:none;">
    <div class="ui-infobar container-fluid unselectable hidden-print">
        <small>
            <span>
                
                    <span class="ui-lastchangeuser">&thinsp;<i class="ui-user-icon small" style="background-image: url(https://cdn.libravatar.org/avatar/33bb9fc1b3ad97771de6600a1e7ca622?default=identicon&s=96);" data-toggle="tooltip" data-placement="right" title="igor"></i></span>
                
                &nbsp;<span class="text-uppercase ui-status-lastchange"></span>
                <span class="ui-lastchange text-uppercase" data-createtime="Thu Jan 09 2025 14:48:17 GMT+0000 (Coordinated Universal Time)" data-updatetime="Thu Jan 09 2025 15:00:58 GMT+0000 (Coordinated Universal Time)"></span>
            </span>
            <span class="pull-right">1200 views <a href="https://docs.monadical.com/#" class="ui-edit" title="Edit this note"><i class="fa fa-fw fa-pencil"></i></a></span>
            <br>
            
        </small>
    </div>
    <div id="doc" class="container markdown-body" >

&lt;center&gt;

# Mindfulness in Typescript code branching. Exhaustiveness, pattern matching, and side effects.

&lt;big&gt;

1/2: &#34;Exhaustive absurd&#34;, Or how to if/else

&lt;/big&gt;

*Written by Igor Loskutov. Originally published 2025-01-09 on the [Monadical blog](https://monadical.com/blog.html).*


&lt;/center&gt;

&gt; This is part one of two in our series about code branching in Typescript.
&gt; The first post serves as an introduction to the topic and is intended to be entry-level. It shows useful techniques of how to improve branching safety with explicit exhaustiveness checks.

As developers, we probably all wrote our first **if/else** statement when we were just newborns (that is, 0-years-experienced newborns in the industry).

```ts
if (x &gt; 5) {
  console.log(&#39;Greater than 5&#39;);
} else {
  console.log(&#39;Not greater than 5&#39;);
}
```

We proceeded with learning switch/case, and usually end here. &#34;We&#39;re ready to hack The Next Facebook. Nobody can stop us now, not even our teamlead&#34;.

```ts
switch (x) {
  case 5:
    console.log(&#39;Five&#39;);
    break;
  case 6:
    console.log(&#39;Six&#39;);
    break;
  default:
    console.log(&#39;Not five or six&#39;);
}
```

![five, six and not](https://www.loskutoff.com/static/blog/never-have-i-ever/five-six-and-not.png)

Then we learn about OOP and inheritance, and that it also can provide branching:

```ts
class Animal {
  constructor(public name: string) {}
  makeSound(): string {
    return `${this.name} makes a sound.`;
  }
}

class Dog extends Animal {
  name = &#39;Dog&#39;;
  makeSound(): string {
    return `${this.name} barks.`;
  }
}

class Cat extends Animal {
  name = &#39;Cat&#39;;
  makeSound(): string {
    return `${this.name} meows.`;
  }
}

// see, no if/else or anything
const handleSound = (animal: Animal): string =&gt; animal.makeSound();

const dog = new Dog(&#39;Storm&#39;);
const cat = new Cat(&#39;Viper&#39;);

// &#34;Storm barks.&#34;
handleSound(dog);
// &#34;Viper meows.&#34;
handleSound(cat);

```

![Catdog](https://www.loskutoff.com/static/blog/never-have-i-ever/catdog.png)

&gt; We can also invert the control of the above using visitor pattern (https://en.wikipedia.org/wiki/Visitor_pattern) which I&#39;m to detail in the next post.

The most inquisitive of us all probably wondered how we can do more complex branching and encountered pattern matching in such languages as Haskell, Scala, OCaml and Rust:

```scala
def listMatch(lst: List[Int]): String = lst match {
  case Nil =&gt; &#34;Empty list&#34;
  case List(0, _, _) =&gt; &#34;Starts with zero and has three elements&#34;
  case List(x, y) if x == y =&gt; &#34;Two identical elements&#34;
  case _ =&gt; &#34;Other&#34;
}
```

But is there a deeper meaning to this syntax? And are there underlying intricacies we should be aware of?

![arrows](https://www.loskutoff.com/static/blog/never-have-i-ever/ifelse-vs-arrow.png)

In this brief article, I&#39;ll hopefully present a way of deeper thinking about code branching. I&#39;ll show how to improve type safety and composability of branching in Typescript.

## Why branch?

We need if/else or equivalents to do anything useful in classic programming. Without it, programs will be static and won&#39;t do much. Making programmatic decisions will be very hard. Most likely you&#39;ll map/reduce some data into some other data and that&#39;ll be it.

Assume that you want to send a notification to a user. A user may use different channels to receive notifications, and you want to dispatch properly:

- emails to an email APIs such as Sendgrid
- Slack to Slack APIs etc.

```typescript
type Notification =
  | { type: &#39;email&#39;; recipient: string; subject: string; body: string }
  | { type: &#39;sms&#39;; phoneNumber: string; message: string }
  | { type: &#39;push&#39;; deviceId: string; title: string; body: string }
  | { type: &#39;slack&#39;; channelId: string; text: string }
```

You can handle it with a naive switch/case:

&gt; I&#39;m going to use &#34;break&#34; or &#34;return&#34; for switches everywhere in this post; we won&#39;t go into fallthrough logic.

```ts
function handleNotification(notification: Notification) {
  switch (notification.type) {
    case &#39;email&#39;:
      sendEmail(notification.recipient, notification.subject, notification.body);
      break;
    case &#39;sms&#39;:
      sendSMS(notification.phoneNumber, notification.message);
      break;
    case &#39;push&#39;:
      sendPushNotification(notification.deviceId, notification.title, notification.body);
      break;
    case &#39;slack&#39;:
      postToSlack(notification.channelId, notification.text);
      break;
  }
}
```

&gt; The kind of type we match against (`Notification`) is called [discriminated union](https://www.typescriptlang.org/docs/handbook/typescript-in-5-minutes-func.html#discriminated-unions).

&gt; This code has some potential issues I&#39;ll talk about later. The main point here is that it shows why we want to branch our code at all.

### Playing around with if/else

You also can rewrite the code above to if/else. That won&#39;t change much, it&#39;s just a bit more boilerplate in this case.

&gt; if/else is much more powerful since you can give it any expression resulting in a boolean, e.g. `if (x &gt; 5)`, whereas switch/case would only accept exact matches.

![if/else and switch? Same Picture!](https://www.loskutoff.com/static/blog/never-have-i-ever/same-picture.jpeg)
&lt;p&gt;&lt;i&gt;Picture &lt;a href=&#34;https://dev.to/sumusiriwardana/if-else-or-switch-case-which-one-to-pick-4p3h&#34;&gt;source&lt;/a&gt;&lt;/i&gt;&lt;/p&gt;

```ts
function handleNotification(notification: Notification) {
  if (notification.type === &#39;email&#39;) {
    sendEmail(notification.recipient, notification.subject, notification.body);
  } else if (notification.type === &#39;sms&#39;) {
    sendSMS(notification.phoneNumber, notification.message);
  } else if (notification.type === &#39;push&#39;) {
    sendPushNotification(notification.deviceId, notification.title, notification.body);
  } else if (notification.type === &#39;slack&#39;) {
    postToSlack(notification.channelId, notification.text);
  }
}
```

In both cases, Typescript figures out the shape of the notification object after the &#34;type&#34; field check. Additionally you won&#39;t be able to write something like `notification.type === &#39;GIBBERISH&#39;` or `case(&#39;yes?&#39;)`; it will stop you.

A difference with switch/case is that if/else has more boilerplate, but also is more applicable to more general cases because it allows expressions (such as math comparison `x &gt; 2`) in its &#34;decision tree&#34;.

## Adding new cases

Now, time for the bad news. We want to add a new case like `{ type: &#39;discord&#39;; channel: string; message: string }`. We add it to the union type definition but forget to add to `handleNotification` function.

`handleNotification` works for a week until we notice users aren&#39;t getting notified. They lose their money, the business goes down, marriages break up. All because we forgot to handle `type === &#39;discord&#39;`.

![arrowhead miss](https://www.loskutoff.com/static/blog/never-have-i-ever/arrowhead-miss.png)

This is a recurring problem. Fortunately, there exists a solution already.

```ts
function absurd(x: never): never {
  throw new Error(`panic! not reachable: ${x}`);
}

function handleNotification(notification: Notification) {
  switch (notification.type) {
    // ... switch/case from handleNotification above and then ...
    default:
      absurd(notification.type);
  }
}
```

&gt; This function is also called `assertNever` in [TS documentation](https://www.typescriptlang.org/docs/handbook/unions-and-intersections.html#union-exhaustiveness-checking). I&#39;ll stick to `absurd` because it&#39;s more fun.

How does it work? Each `case` (or `if/else`) Typescript narrows down the possible type of `notification.type`:

```ts
// here, notification.type is full &#39;email&#39; | &#39;sms&#39; | &#39;push&#39; | &#39;slack&#39; | &#39;discord&#39;
switch (notification.type) {
  case &#39;email&#39;:
    break;
  // if we end with &#34;default&#34; clause here, notification.type would be &#39;sms&#39; | &#39;push&#39; | &#39;slack&#39; | &#39;discord&#39;, so, with no &#39;email&#39;
  case &#39;sms&#39;:
    break;
  // if we end with &#34;default&#34; clause here, notification.type would be &#39;push&#39; | &#39;slack&#39; | &#39;discord&#39;, so, with no &#39;email&#39; or &#39;sms&#39;
  case &#39;push&#39;:
    break;
  // if we end with &#34;default&#34; clause here, notification.type would be &#39;slack&#39; | &#39;discord&#39;, so, with no &#39;email&#39; or &#39;sms&#39; or &#39;push&#39;
  case &#39;slack&#39;:
    postToSlack(notification.channelId, notification.text);
    break;
  // finally, we&#39;re ending with &#34;default&#34; clause here, and so notification.type is &#39;discord&#39;, with no &#39;email&#39; or &#39;sms&#39; or &#39;push&#39; or &#39;slack&#39;
  default:
    absurd(notification.type);
}
```

But `absurd(notification.type)` expects `never` type! It won&#39;t allow anything else, yet we&#39;re trying to feed it &#39;discord&#39; string literal.

And so it goes: compiler complains, you realize your code has a bug, you fix it **before** shipping to your users and not **after** (that is, unless you also wrote good tests.)

You fix it by adding another `case` clause:

```ts
function handleNotification(notification: Notification) {
  switch (notification.type) {
    // ...
    case &#39;discord&#39;:
      postToDiscord(notification.channelId, notification.message);
      break;
    // default: ...
  }
}
```

&gt; What about more &#34;type-free&#34; comparisons like n &gt; 5? Type narrowing doesn&#39;t apply here. You have to figure yourself whether you covered all cases or not.

### A peculiar case of &#34;never&#34;

![nevermore](https://www.loskutoff.com/static/blog/never-have-i-ever/nevermore.png)
&lt;p&gt;&lt;i&gt;Artist: &lt;a href=&#34;https://www.instagram.com/serytama.art/p/C59EwKrOQBR/&#34;&gt;Serytama.art&lt;/a&gt;&lt;/i&gt;&lt;/p&gt;

`never` is a very [special type](https://www.typescriptlang.org/docs/handbook/basic-types.html#never) in Typescript.

It&#39;s assignable to anything, which isn&#39;t very useful in our case, but is useful in more advanced cases.

But another property we can and do leverage: nothing can be assigned to `never`, except `never` itself.

So, the function `absurd` expects only `never` type.

```ts
function absurd(x: never): never {
  throw new Error(`panic! not reachable: ${x}`);
}
absurd(&#39;fizzbuzz&#39;); // error: Argument of type &#39;&#34;fizzbuzz&#34;&#39; is not assignable to parameter of type &#39;never&#39;.
```

When our `notification.type` above is checked, it narrows down gradually to lesser and lesser type, until only `discord` literal is left, and finally we narrow `discord` literal itself.

When nothing is left out of our poor `notification.type` type, only `never` remains.

There&#39;s one extra way to show that in code; with an (arguably ugly) ternary:

```ts
// some imaginary numeric &#34;code&#34;...
const code: number =
  notification.type/*&#39;email&#39; | &#39;sms&#39; | &#39;push&#39; | &#39;slack&#39; | &#39;discord&#39;*/ === &#39;email&#39; ? 1 :
    notification.type/*&#39;sms&#39; | &#39;push&#39; | &#39;slack&#39; | &#39;discord&#39;*/ === &#39;sms&#39; ? 2 :
      notification.type/*&#39;push&#39; | &#39;slack&#39; | &#39;discord&#39;*/ === &#39;push&#39; ? 3 :
        notification.type/*&#39;slack&#39; | &#39;discord&#39;*/ === &#39;slack&#39; ? 4 :
          notification.type/*&#39;discord&#39;*/ === &#39;discord&#39; ? 5 :
            absurd(notification.type/*never*/);
````

Importantly, when `never`-typed values in code, you can always assume this part of the code is unreachable, assuming your typing has no bugs. In Typescript, it may happen e.g. because of casting with `as`. That&#39;s why I accompany the `never` check in `absurd` with a `throw`. Better safe than sorry.

### Object key mapping

There&#39;s another technique to map behaviours that&#39;s worth mentioning. It lets us (in some cases) avoid the need for `switch/case`, `if/else`, and still have exhaustive behaviour without using any `absurd` hacks.

```ts
export const handlers = {
  email: (notification: Notification &amp; {type: &#39;email&#39;}) =&gt; sendEmail(notification.recipient, notification.subject, notification.body),
  sms: (notification: Notification &amp; {type: &#39;sms&#39;}) =&gt; sendSMS(notification.phoneNumber, notification.message),
  push: (notification: Notification &amp; {type: &#39;push&#39;}) =&gt; sendPushNotification(notification.deviceId, notification.title, notification.body),
  slack: (notification: Notification &amp; {type: &#39;slack&#39;}) =&gt; postToSlack(notification.channelId, notification.text),
  discord: (notification: Notification &amp; {type: &#39;discord&#39;}) =&gt; postToDiscord(notification.channelId, notification.message),
};
// ...
const notification: Notification = {type: &#39;email&#39;, recipient: &#39;igor@loskutoff.com&#39;, subject: &#39;hello&#39;, body: &#39;world&#39;};
handlers[notification.type](notification);
```

Note `&amp; {type: &#39;email&#39;}` in the argument type. It would narrow down the type of `notification`, opening up the fields `receipient`, `subject` and `body` to be used in the handler. Same with `sms` and `push` and `slack` and `discord`.

With `handlers`, you won&#39;t be able to write a new type of notifications without adding a new handler, which is the main benefit of this technique.

Dead code elimination works here as well: if you remove one of the handlers, its `&amp; {type: }` won&#39;t compile anymore, inviting you to remove the corresponding case as well, same as with `switch/case` or `if/else`.

The most common sentiment against this technique I encounter is that it introduces a layer of indirection. I say indeed it does, as any separation of concerns technique. I also argue that separation of concerns objectively brings more benefits than a thin (it&#39;s language-level!) layer of indirection.

### Eslint rule

Honorary mention to [switch-exhaustiveness-check](https://typescript-eslint.io/rules/switch-exhaustiveness-check/), which while not a &#34;typescript&#34;-native solution, is still good enough to preserve exhaustiveness for switch/case.

It&#39;s a ESlint rule that enforces exhaustiveness of enums and union types.

## Never have I ever...

In this post, I&#39;ve introduced the concept of exhaustiveness checking and explored some of the ways to branch in Typescript.

These tools alone, used properly, will drastically improve your type safety and save you from many runtime bugs.

I haven&#39;t talked about return types yet; i&#39;ll save that for the follow up.

In that post I&#39;ll also talk about more advanced notions, such as pattern matching with ts-pattern and in other languages, expressions and side effects, IIFE, discriminated unions and algebraic data types (spoiler: we used the latter two in the examples above), and what they do in OOP to achieve the same goal (spoiler: Visitor Pattern).

I&#39;ll also present a case that in most situations, we won&#39;t need the `absurd`-like function call at all, even if you don&#39;t explicitly declare return type.


</div>
    <div class="ui-toc dropup unselectable hidden-print" style="display:none;">
        <div class="pull-right dropdown">
            <a id="tocLabel" class="ui-toc-label btn btn-default" data-toggle="dropdown" href="https://docs.monadical.com/#" role="button" aria-haspopup="true" aria-expanded="false" title="Table of content">
                <i class="fa fa-bars"></i>
            </a>
            <ul id="ui-toc" class="ui-toc-dropdown dropdown-menu" aria-labelledby="tocLabel">
            </ul>
        </div>
    </div>
    <div id="ui-toc-affix" class="ui-affix-toc ui-toc-dropdown unselectable hidden-print" data-spy="affix" style="display:none;"></div>
    
</body>

</html>
<script src="https://docs.monadical.com/js/mathjax-config-extra.js"></script>
<script src="https://docs.monadical.com/build/MathJax/MathJax.js" defer></script>
<script src="https://docs.monadical.com/build/MathJax/config/TeX-AMS-MML_HTMLorMML.js" defer></script>
<script src="https://docs.monadical.com/build/MathJax/config/Safe.js" defer></script>
<script src="https://docs.monadical.com/config"></script><script src="https://docs.monadical.com/build/vendors~common.0252483117be96f00e28.js" defer="defer"></script><script src="https://docs.monadical.com/build/common.0c0667a7b004f0fcfd13.js" defer="defer"></script><script src="https://docs.monadical.com/build/vendors~cover~cover-pack~index~index-pack~pretty~pretty-pack~slide~slide-pack.89ccd89a09f629d94d5c.js" defer="defer"></script><script src="https://docs.monadical.com/build/vendors~index~index-pack~pretty~pretty-pack~slide~slide-pack.ab8ca16a9a0e12c92d31.js" defer="defer"></script><script src="https://docs.monadical.com/build/pretty-pack.c2685453bcc85995cfc9.js" defer="defer"></script>



                        </article>
                    
                </div>
            </div>
        </div>
        <div class="container">
            <div class="authorbox">
                
                    <div class="authorbox__content">
                        <img src="/static/core/img/img-team-037.png" alt="Igor Loskutov"/>
                        <div>
                            <h3><a href="https://github.com/dearlordylord" target="_blank" rel="noopener">Igor Loskutov</a></h3>
                            <h5> is a Senior If/Else Architect of Monadical</h5>
                        </div>
                    </div>
                
            </div>
            <div class="recent-posts">
                <h4>Recent posts</h4>
                <ul>
                    
                        
                            <li><a href="/posts/The-scraping-with-cookies-dilemma.html">The Scraping-With-Cookies Dilemma</a></li>
                        
                    
                        
                            <li><a href="/posts/conversations-are-the-new-oil.html">Conversations are the New Oil</a></li>
                        
                    
                        
                            <li><a href="/posts/don&#39;t-give-big-tech-your-papaya.html">Don&#39;t Give Big Tech Your Papaya</a></li>
                        
                    
                        
                            <li><a href="/posts/so-you-want-to-build-a-social-network.html">So you want to build a social network?</a></li>
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    <li>
                        <a href="/blog.html">
                            View more posts...
                        </a>
                    </li>
                </ul>
            </div>
            <script src="https://utteranc.es/client.js"
                repo="Monadical-SAS/monadical.com"
                issue-term="pathname"
                label="blog"
                theme="github-light"
                crossorigin="anonymous"
                async>
            </script>
            <center>
                <a href="#post-content" class="back-to-top">
                    Back to top <i class="fa fa-arrow-up"></i>
                </a>
            </center>

            <!-- Final CTA -->
<div class="row final-cta">
  <div class="col-12 text-center">
      <h2>Let's <span class="highlight">transform</span> your organization.</h2>
      <a href="/contact-us.html" class="btn btn-primary cta-button">BOOK A FREE AI STRATEGY CALL</a>
  </div>
</div>
        </div>
        <script type="text/javascript" id="MathJax-script" async
          src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
        </script>
        <script>
            // hide the table of contents nav when you scroll down past the end
            $(window).scroll(function() {
                const pos = $(window).scrollTop()
                const threshold = $('.authorbox').position().top - 250
                $('#ui-toc-affix').css({
                    opacity: (pos > threshold) ? 0 : 1
                });
                $('.pull-right').css({
                    opacity: (pos > threshold) ? 0 : 1
                });
            });
            document.addEventListener('DOMContentLoaded', () => {
                document.querySelector('#ui-toc-affix > div.toc-menu > a.go-to-bottom').innerHTML = 'Go to comments'
                document.querySelector('#ui-toc-affix > div.toc-menu > a.go-to-bottom').href = '#post-footer'
                document.querySelector('#ui-toc-affix > div.toc-menu > a.back-to-top').innerHTML = 'Go to top'
                document.querySelector('#ui-toc-affix > div.toc-menu > a.back-to-top').href = '#post-content'
                // Popup toc for samll screens
                document.querySelector('#ui-toc > div.toc-menu > a.go-to-bottom').innerHTML = 'Go to comments'
                document.querySelector('#ui-toc > div.toc-menu > a.go-to-bottom').href = '#post-footer'
                document.querySelector('#ui-toc > div.toc-menu > a.back-to-top').innerHTML = 'Go to top'
                document.querySelector('#ui-toc > div.toc-menu > a.back-to-top').href = '#post-content'

                // GET the original article source so they get they bump the view counter
                fetch('https://docs.monadical.com/s/if-else-1', {mode: 'no-cors'})

                // remove undesired css that break styles
                setTimeout(() => document.querySelector("link[href*='pretty-styles-pack']").remove(), 500)
            })

            $('[href$="bootstrap.min.css"]').attr('disabled', 'disabled')
        </script>
        <script>
            function setOpacity(){
                const maxWidth = 1140;
                const width = $(window).width();
                $('#post-cube-left').css({
                    opacity: (width < maxWidth) ? 0.1 : 0.6
                });
                $('#post-tentacle-right').css({
                    opacity: (width < maxWidth) ? 0.1 : 0.6
                });
            }

            $(document).ready(setOpacity);
            $(window).resize(setOpacity);

            // Remove undesired bootstrap styles
            setTimeout(() => {
                $('[href$="bootstrap.min.css"]').attr('disabled', 'disabled');
                document.querySelector("link[href*='pretty-styles-pack']")?.remove();
            }, 500);
        </script>
    </div>

    </article>
    

    
    <footer>
        
        
        <div class="container footer">
            
            <div class="row">
                <div class="col-12 col-md-4">
                    <ul>
                        <li><b title="Montréal, Canada">Montréal</b></li>
                        <li><b title="New York, USA">New York</b></li>
                        <li><b title="San Francisco, USA">San Francisco</b></li>
                        <li><b title="Vancouver, Canada">Vancouver</b></li>
                        <li><b title="Medellín, Colombia">Medellín</b></li>
                    </ul>
                </div>
                <div class="col-12 col-md-3">
                    <ul>
                        <li>
                            <b>Monadical</b>
                        </li>
                        <li><a href="/blog.html">Blog</a></li>
                        <li><a href="/services.html">Services</a></li>
                        <li><a href="/projects.html">Projects</a></li>
                        <li><a href="/privacy.html">Privacy Policy</a></li>
                    </ul>
                </div>
                <div class="col-12 col-md-3">
                    <ul>
                        <li>
                            <b>About Us</b>
                        </li>
                        <li><a href="/about.html">About</a></li>
                        <li><a href="/team.html">Team</a></li>
                        <li><a href="/principles.html">Principles</a></li>
                    </ul>
                </div>
                <div class="col-12 col-md-2">
                    <ul>
                        <li>
                            <b>Contact Us</b>
                        </li>
                        <li><a href="https://cal.com/monadical/widget">Get a Quote</a></li>
                        <li><a href="https://careers.monadical.com/">Careers</a></li>
                        <li><a href="/contact-us.html">Contact us</a></li>
                    </ul>
                </div>
            </div>
            <div class="row social">
                <div class="col-12">
                    <ul>
                        <li>
                            <a href="https://twitter.com/MonadicalHQ" title="Monadical Twitter" target="_blank"
                                rel="noopener">
                                <i class="fa fa-twitter"></i>
                            </a>
                        </li>
                        <li>
                            <a href="https://facebook.com/monadical" title="Monadical Facebook" target="_blank"
                                rel="noopener">
                                <i class="fa fa-facebook"></i>
                            </a>
                        </li>
                        <li>
                            <a href="https://linkedin.com/company/monadical" title="Monadical LinkedIn" target="_blank"
                                rel="noopener">
                                <i class="fa fa-linkedin"></i>
                            </a>
                        </li>
                        <li>
                            <a href="https://github.com/Monadical-SAS" title="Monadical Github" target="_blank"
                                rel="noopener">
                                <i class="fa fa-github"></i>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            
        </div>
        
        
    </footer>
    

    <script type="text/javascript">
        // hide all the tags containing fake contact info that are there to throw off scrapers
        // most scrapers dont run JS, so this fairly effectively masks our real info from bots
        for (const elem of document.querySelectorAll('.please-scrape-this-fake-info')) {
            elem.style.display = 'none'
        }
    </script>

    <script src="/static/squares.js"></script>


    
    

    <!-- Smooth Scroll to Anchor Links Animation -->
    <script>
        function getUnicodeHash(reference) {
            return "#\\" + reference.codePointAt(1).toString(16) + " " + reference.slice(2)
        }
        function smoothScroll(e) {
            const hash = decodeURIComponent(this.hash)
            e.preventDefault()
            e.stopPropagation()

            console.log('Scrolling to', this.getAttribute('href'))
            let reference = this.getAttribute('href')
            if (reference.match(/^#[0-9]+/)) {
                reference = getUnicodeHash(reference)
            }
            document.querySelector(reference).scrollIntoView({
                behavior: 'smooth'
            });
            setTimeout(() => {
                window.location.hash = hash
            }, 500/*arbitrary value, not standartized*/);
        }
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('a[smoothhashscroll]').forEach(elem => {
                /*
                   this code drops all the event listeners that were attached so far;
                   we need to do it here because the event listeners themselves are not under control of this repo
                   this content together with js files (that are executed) is presumably downloaded from hedgedoc
                   this is a very hacky hack, we shall negate it "as soon as we can"
                */
                elem.parentNode.outerHTML = elem.parentNode.outerHTML
            })
            document.querySelectorAll('a[href^="#"], a[smoothhashscroll]').forEach(anchor => {
                anchor.addEventListener('click', smoothScroll);
            });
        })
    </script>

    <!-- Matomo -->
    <script type="text/javascript">
        var _paq = window._paq || [];
        /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
        _paq.push(["setCookieDomain", "*.monadical.com"]);
        _paq.push(['trackPageView']);
        _paq.push(['enableLinkTracking']);
        // accurately measure the time spent in the visit
        _paq.push(['enableHeartBeatTimer']);
        (function () {
            var u = "//analytics.zervice.io/";
            _paq.push(['setTrackerUrl', u + 'matomo.php']);
            _paq.push(['setSiteId', '12']);
            var d = document,
                g = d.createElement('script'),
                s = d.getElementsByTagName('script')[0];
            g.type = 'text/javascript';
            g.async = true;
            g.defer = true;
            g.src = u + 'matomo.js';
            s.parentNode.insertBefore(g, s);
        })();
    </script>
    <!-- End Matomo Code -->

    <!-- Highlight Code -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
    <!-- End Highlight Code -->
</body>

</html>