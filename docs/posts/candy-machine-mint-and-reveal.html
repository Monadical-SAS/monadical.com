<!DOCTYPE html>
<html lang="en">

<head>

    <title>How to mint and reveal NFTs with Candy Machine V2</title>

    <!-- Meta Tags Start -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="title" content="How to mint and reveal NFTs with Candy Machine V2">
    <meta name="description"
        content="In this tutorial, you&#39;ll learn how to create a “mint and wait for reveal” Candy Machine. Doing so will allow Candy Machine users to mint “closed” NFTs and wait for them to be “revealed” at a later date, bringing elements of anticipation and excitement to their experience.">
    <meta property="og:locale" content="en_US" />
    <meta property="og:description"
        content="In this tutorial, you&#39;ll learn how to create a “mint and wait for reveal” Candy Machine. Doing so will allow Candy Machine users to mint “closed” NFTs and wait for them to be “revealed” at a later date, bringing elements of anticipation and excitement to their experience.">
    <meta property="og:image" name="image" content="https://monadical.com/static/candy-machine-mint-and-reveal.png">
    <meta property="og:title" content="How to mint and reveal NFTs with Candy Machine V2">
    <meta property="og:type" content="article">
    <meta property="og:url" content=https://monadical.com/posts/candy-machine-mint-and-reveal.html />
    <meta property="og:site_name" content="Monadical Consulting" />
    
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:description"
        content="In this tutorial, you&#39;ll learn how to create a “mint and wait for reveal” Candy Machine. Doing so will allow Candy Machine users to mint “closed” NFTs and wait for them to be “revealed” at a later date, bringing elements of anticipation and excitement to their experience.">
    <meta property="twitter:image" content="https://monadical.com/static/candy-machine-mint-and-reveal.png">
    <meta property="twitter:site" content="@MonadicalHQ">
    <meta property="twitter:title" content="How to mint and reveal NFTs with Candy Machine V2">
    <meta property="twitter:url" content=https://monadical.com/posts/candy-machine-mint-and-reveal.html />
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
    <meta name="robots" content="follow, index" />
    <!-- Meta Tags End -->

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans|Ubuntu" type="text/css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fjalla+One" type="text/css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700" type="text/css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/font-hack/2.020/css/hack.min.css" type="text/css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
        type="text/css">

    <link rel="stylesheet" href="/static/bootstrap4-pleasant.min.css" type="text/css">
    <link rel="stylesheet" href="/static/core/css/base.css" type="text/css">

    <link rel="canonical" href="https://monadical.com/posts/candy-machine-mint-and-reveal.html" />

    <link rel="apple-touch-icon" sizes="76x76" href="/static/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/favicon/favicon-16x16.png">
    <link rel="mask-icon" href="/static/favicon/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/atom-one-light.min.css">



    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous">
        </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous">
        </script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"
        integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous">
        </script>

    
<link rel="stylesheet" href="/static/core/css/index.css">



</head>

<body>
    
    <header>
        
        

        <div id="header-container" class="container">
            <nav class="navbar navbar-expand-lg navbar-dark bg-white">
                
                <a class="navbar-brand" id="monadical-brand" href="/index.html">
                    <img srcset="/static/core/img/logo@3x.png 3x,
                                 /static/core/img/logo@2x.png 2x" src="/static/core/img/logo.png" id="brand-img" />
                </a>
                
                <button class="navbar-toggler" type="button" data-toggle="collapse"
                    data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                    aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <div class="navbar-content-container">
                        <ul class="navbar-nav navbar-left">
                            
                            
                            <li class="nav-item">
                                <a class="nav-link text-truncate" href="/services.html">Services</a>
                            </li>
                            
                            
                            
                            <li class="nav-item">
                                <a class="nav-link text-truncate" href="/principles.html">Principles</a>
                            </li>
                            
                            
                            
                            <li class="nav-item">
                                <a class="nav-link text-truncate" href="/portfolio.html">Portfolio</a>
                            </li>
                            
                            
                            
                            <li class="nav-item">
                                <a class="nav-link text-truncate" href="/team.html">Team</a>
                            </li>
                            
                            
                            
                            <li class="nav-item">
                                <a class="nav-link text-truncate" href="/blog.html">Blog</a>
                            </li>
                            
                            
                        </ul>

                        
                        <a class="beta-btn nav-link button-navbar" href="/contact-us.html">
                            GET A TECHNICAL ASSESSMENT
                        </a>
                        
                    </div>
                </div>
            </nav>
        </div>
    </header>
    


    
    <article>
        

    <style>
        h1 {
            font-family: 'Fjalla One', sans-serif !important;
        }
        .article-content {
            border: 0px;
        }
        .fa-pencil {
            opacity: 0.01;
        }
        footer .social-links {
            text-shadow: 4px 4px 4px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        footer .social-links a {
            color: #333;
            opacity: 0.7;
        }
        footer .social-links a:hover {
            color: #333;
            opacity: 0.9;
        }       
        .authorbox {
            font-size: 20px;
            display: flex;
            flex-wrap: wrap;
            flex-direction: row;
            align-items: center;
            justify-content: center;
            gap: 48px;
            margin-bottom: 40px; 
        }
        .authorbox__content {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .authorbox__content img {
            min-width: 120px;
            max-width: 120px;
            min-height: 120px;
            max-height: 120px;
            object-fit: cover;
            border-radius: 50%
        }
        .authorbox__content h3 {
            margin: 0;
        }
        .authorbox__content h5 {
            margin-bottom: 20px;
        }
        .post-footer {
            display: flex;
            flex-wrap: wrap;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            column-gap: 24px;
            max-width: 768px;
            margin-top: 40px;
        }
        .newsletterbox {
            font-size: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 32px;
            margin-top: 80px;
        }
        .post-footer h4 {
            font-size: 18px;
        }
        body > main > h1 > em {
            opacity: 0;
        }
        #ui-toc-affix {
            display: block;
            position: fixed;
            top: 175px;
            user-select: initial;
            max-width: 20vw;
            margin-left: 15px;
            transition: opacity 400ms ease;
        }
        .dropup .dropdown-menu {
            bottom: auto !important;
        }
        @media (min-width: 768px) and (max-width: 991px) {
            header .navbar-collapse {
                padding-left: 0;
            }
            
            header .navbar-nav > li > a {
                padding-top: 10px;
                padding-bottom: 10px;
            }
        }
        @media (max-width: 768px) {
            header .navbar-collapse {
                padding-left: 0;
            }

            header .navbar-nav .nav-link {
                padding-left: 15px;
            }

        }
    </style>
    <div id="post-content">
        <div class="container">
            <img class="cloud-img-left" src="/static/core/img/img-team-013.png">
            <img class="tentacle-img-right" id="post-tentacle-right" src="/static/core/img/img-home-010.png">
            <img class="cube-img-left" id="post-cube-left" src="/static/core/img/img-home-002.png">
            <img class="cloud-img-right" src="/static/core/img/img-team-014.png">
            <div class="row">
                <div class="col">
                    
                        <article class="article-content">
                            <!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="mobile-web-app-capable" content="yes">
    
    
    <meta name="description" content="In this tutorial, you&#39;ll learn how to create a “mint and wait for reveal” Candy Machine. Doing so will allow Candy Machine users to mint “closed” NFTs and wait for them to be “revealed” at a later date, bringing elements of anticipation and excitement to their experience.">
    
    
    
    <meta property="og:title" content="How to mint and reveal NFTs with Candy Machine V2 - HedgeDoc">
    
    
    <meta property="og:description" content="In this tutorial, you&#39;ll learn how to create a “mint and wait for reveal” Candy Machine. Doing so will allow Candy Machine users to mint “closed” NFTs and wait for them to be “revealed” at a later date, bringing elements of anticipation and excitement to their experience.">
    
    
    <meta property="og:type" content="website">
    
    <meta property="og:image" content="https://docs.monadical.com/icons/android-chrome-512x512.png">
    <meta property="og:image:alt" content="HedgeDoc logo">
    <meta property="og:image:type" content="image/png">
    
    <base href="">
    <title>How to mint and reveal NFTs with Candy Machine V2 - HedgeDoc</title>
    <link rel="apple-touch-icon" sizes="180x180" href="https://docs.monadical.com/icons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://docs.monadical.com/icons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://docs.monadical.com/icons/favicon-16x16.png">
<link rel="manifest" href="https://docs.monadical.com/icons/site.webmanifest">
<link rel="mask-icon" href="https://docs.monadical.com/icons/safari-pinned-tab.svg" color="#b51f08">
<link rel="shortcut icon" href="https://docs.monadical.com/icons/favicon.ico">
<meta name="apple-mobile-web-app-title" content="HedgeDoc - Collaborative markdown notes">
<meta name="application-name" content="HedgeDoc - Collaborative markdown notes">
<meta name="msapplication-TileColor" content="#b51f08">
<meta name="msapplication-config" content="https://docs.monadical.com/icons/browserconfig.xml">
<meta name="theme-color" content="#b51f08">

    <link rel="stylesheet" href='https://docs.monadical.com/build/emojify.js/dist/css/basic/emojify.min.css'>
    <link href="https://docs.monadical.com/build/font-pack.51d576c9ea0a7705d2e0.css" rel="stylesheet"><link href="https://docs.monadical.com/build/2.04010c738e6d668e6e08.css" rel="stylesheet"><link href="https://docs.monadical.com/build/3.b67314821de89ccff48b.css" rel="stylesheet"><link href="https://docs.monadical.com/build/pretty-styles-pack.6437be263d7329017dfe.css" rel="stylesheet"><link href="https://docs.monadical.com/build/pretty-styles.8aa1888af7df52aee395.css" rel="stylesheet"><link href="https://docs.monadical.com/build/1.1666d9d869a0532d9bce.css" rel="stylesheet"><link href="https://docs.monadical.com/build/pretty.0424d40e7df68caf04c5.css" rel="stylesheet">
</head>

<body style="display:none;">
    <div class="ui-infobar container-fluid unselectable hidden-print">
        <small>
            <span>
                
                    <span class="ui-lastchangeuser">&thinsp;<i class="ui-user-icon small" style="background-image: url(https://cdn.libravatar.org/avatar/7a4046902e89413f142b9833b9ff6c49?default=identicon&s=96);" data-toggle="tooltip" data-placement="right" title="erin"></i></span>
                
                &nbsp;<span class="text-uppercase ui-status-lastchange"></span>
                <span class="ui-lastchange text-uppercase" data-createtime="Tue Jan 18 2022 14:35:15 GMT+0000 (Coordinated Universal Time)" data-updatetime="Wed Feb 09 2022 17:33:11 GMT+0000 (Coordinated Universal Time)"></span>
            </span>
            <span class="pull-right">3762 views <a href="https://docs.monadical.com/#" class="ui-edit" title="Edit this note"><i class="fa fa-fw fa-pencil"></i></a></span>
            <br>
            
            <span class="ui-owner">
                &thinsp;<i class="ui-user-icon small" style="background-image: url(https://cdn.libravatar.org/avatar/7b1b393fd1466bc89ae2b42561b90176?default=identicon&s=96);" data-toggle="tooltip" data-placement="right" title="kevin"></i>
                &nbsp;<span class="text-uppercase">owned this note</span>
            </span>
            
        </small>
    </div>
    <div id="doc" class="container markdown-body" >

&lt;center&gt;

# How to mint and reveal NFTs with Candy Machine V2

&lt;big&gt;

&lt;/big&gt;

*Written by Kevin Guevara and Juan Diego García. Originally published 2022-02-09 on the [Monadical blog](https://monadical.com/blog.html).*


&lt;/center&gt;


Metaplex’s first version of Candy Machine had a few too many problems, such as restricting users and reusing the same NFT images. To help users solve these issues, another version of the program has recently been released: Candy Machine v2. This updated version is equipped with a new tool suite that users can use to resolve limitations they’ve encountered in the program. This is great news, but it also means that we’re going to have to learn how to use v2’s new tools. So, we might as well start right now!

In this tutorial, I’m going to explain how to create a “mint and wait for reveal” Candy Machine. This will allow users to mint “closed” NFTs and wait for them to be “revealed” at a later date. Delaying the reveal adds an element of luck and excitement to the minting experience, making it a great way to gamify your Candy Machine.

In order to do this, you’ll need to drop a Candy Machine v2 with two of the new settings configurations: [whitelistMintSettings](https://github.com/metaplex-foundation/docs/blob/main/docs/candy-machine-v2/02-configuration.md#whitelist-settings) and [hiddenSettings](https://github.com/metaplex-foundation/docs/blob/main/docs/candy-machine-v2/02-configuration.md#hidden-settings).
 With these configurations, you will be able to deploy a Candy Machine that can only be minted by specific users, uses one asset in the creation, and can be minted as often as needed. Once deployed, these features will allow you to simulate a wait for a reveal feature and mint blank NFTs.


## Create your Candy Machine.

### 1. Creating your development environment
Before you do anything, you need to install [SOLANA CLI](https://docs.solana.com/es/cli/install-solana-cli-tools), [SPL-TOKEN](https://spl.solana.com/token) and [CANDY MACHINE V2](https://github.com/metaplex-foundation/docs/blob/main/docs/candy-machine-v2/01-getting-started.md). All of the provided links contain installation instructions.

### 2. Prepare your folder structure. 

Next, folders and files need to be created. For now, you can just create an “assets” folder with this structure:
![](https://docs.monadical.com/uploads/5fb79fe51e47ca767ab94b626.png)

The assets folder is where you will save the metadata used in the Candy Machine. Usually, you would allocate all the images that you are going to mint here. Today, you’ll be taking a different approach. 

**config.json** is the file that you’ll use to define your Candy Machine configuration. For now, populate it with this blank configuration:

```
{
    &#34;price&#34;: 1.0,
    &#34;number&#34;: 10,
    &#34;gatekeeper&#34;: null,
    &#34;solTreasuryAccount&#34;: &#34;&lt;YOUR WALLET ADDRESS&gt;&#34;,
    &#34;splTokenAccount&#34;: null,
    &#34;splToken&#34;: null,
    &#34;goLiveDate&#34;: &#34;25 Dec 2021 00:00:00 GMT&#34;,
    &#34;endSettings&#34;: null,
    &#34;whitelistMintSettings&#34;: null,
    &#34;hiddenSettings&#34;: null,
    &#34;storage&#34;: &#34;arweave-sol&#34;,
    &#34;ipfsInfuraProjectId&#34;: null,
    &#34;ipfsInfuraSecret&#34;: null,
    &#34;awsS3Bucket&#34;: null,
    &#34;noRetainAuthority&#34;: false,
    &#34;noMutable&#34;: false
}
```

### 3. Define your custom token. 
*Note: If you are using an existing SPL-TOKEN, you can use that instead and skip this step.* 

*Note 2: This token would only be used to whitelist wallets that have this token. User will still need to pay the Minting price in SOL.*

If you are going to create a whitelist, you need to find a way to differentiate the allowed users from the blocked users. In this version of Candy Machine, you can do this by using the [SPL-TOKEN ](https://spl.solana.com/token). This token behaves like a whitelist ticket, permitting token owners to mint the Candy Machine, while denying access to those who don’t own tokens.

```
# CREATE THE TOKEN
$ spl-token create-token — decimals 0 &gt; token-output.txt

# CREATE THE ACCOUNT THAT ARE GOING TO USE THAT TOKEN.
$ spl-token create-account &lt;TOKEN&gt; &gt; account-treasury.txt

# MINT AN AMOUNT OF TOKENS TO THAT ACCOUNT
$ spl-token mint &lt;TOKEN&gt; 1000 &lt;ACCOUNT&gt;
```
The spl-token uses solana-cli&#39;s configuration file default. If you want to use Mainnet, you will need to use **-u mainnet-beta** or update your config file. 

Save this file. You are going to need it later!



### 4. Create your master edition.

Before you do anything, make sure that you are executing Metaplex in the correct network (either mainnet, testnet or devnet). 

If you only need to use one asset in the creation, upload the asset to arweave by creating a master edition NFT and extracting the aerwave uri.

To do this, I am going to use the Metaplex interface, with this image as the master token:

![](https://docs.monadical.com/uploads/5fb79fe51e47ca767ab94b62a.png)
&gt; For security and standards purposes, you must use the same wallet that you will use to create your Candy Machine with. If you need a tutorial on how to export your Phantom wallet to your Solana-cli, take a look at [this one](https://monadical.com/posts/export-phantom-wallet.html). 
1. Create your asset as an NFT.
![](https://docs.monadical.com/uploads/5fb79fe51e47ca767ab94b62c.png)
&lt;br/&gt;
![](https://docs.monadical.com/uploads/5fb79fe51e47ca767ab94b62e.png)

2. With your master token in your wallet, go to Phantom and open your NFT in Solscan.&lt;br/&gt; 
![](https://docs.monadical.com/uploads/5fb79fe51e47ca767ab94b630.png)

In the metadata, extract the Arweave URI. &lt;br/&gt;
![](https://docs.monadical.com/uploads/5fb79fe51e47ca767ab94b65d.png)


### 5. Prepare your assets. 
As the documentation says, 
&gt; Your assets consist of a collection of images (e.g., .png) and metadata (.json) files organized in a 1:1 mapping - i.e., each image has a corresponding metadata file.

In this example I’m using only one asset, so I’m going to have an assets folder like this:
![](https://docs.monadical.com/uploads/5fb79fe51e47ca767ab94b633.png)

In 0.json I need to specify my NFT metadata, pointing to my 0.png file.
```
{
    &#34;name&#34;: &#34;CANDY TOKEN&#34;,
    &#34;symbol&#34;: &#34;&#34;,
    &#34;description&#34;: &#34;&#34;,
    &#34;seller_fee_basis_points&#34;: 500,
    &#34;image&#34;: &#34;0.png&#34;,
    &#34;attributes&#34;: [
        {&#34;trait_type&#34;: &#34;Layer-1&#34;, &#34;value&#34;: &#34;0&#34;},
        {&#34;trait_type&#34;: &#34;Layer-2&#34;, &#34;value&#34;: &#34;0&#34;}, 
        {&#34;trait_type&#34;: &#34;Layer-3&#34;, &#34;value&#34;: &#34;0&#34;},
        {&#34;trait_type&#34;: &#34;Layer-4&#34;, &#34;value&#34;: &#34;1&#34;}
    ],
    &#34;properties&#34;: {
        &#34;creators&#34;: [{&#34;address&#34;: &#34;&lt;YOUR WALLET ADDRESS&gt;&#34;, &#34;share&#34;: 100}],
        &#34;files&#34;: [{&#34;uri&#34;: &#34;0.png&#34;, &#34;type&#34;: &#34;image/png&#34;}]
    },
    &#34;collection&#34;: {&#34;name&#34;: &#34;numbers&#34;, &#34;family&#34;: &#34;numbers&#34;}
}
```

Be sure that the creator address is the same address that you used to create your master edition NFT, because we will be using that data for the Candy Machine. 

### 6. Edit your config.json file. 

I’m now going to create a Candy Machine with the following features:

- Contains 50 NFTS that are the same file, at a price of 0.0001. 
- Uses a white list that burns the token every time you use it.
- Has a “go live” date of Jan 15, 2022. 

If you want to work on more complex scenarios, check out the [official documentation](https://github.com/metaplex-foundation/docs/blob/main/docs/candy-machine-v2/02-configuration.md). 

At this point, your config.json file should look like this:

```
{
    &#34;price&#34;: 0.0001,
    &#34;number&#34;: 50,
    &#34;gatekeeper&#34;: null,
    &#34;solTreasuryAccount&#34;: &#34;&lt;YOUR WALLET ADDRESS&gt;&#34;,
    &#34;splTokenAccount&#34;: null,
    &#34;splToken&#34;: null,
    &#34;goLiveDate&#34;: &#34;15 Jan 2022 00:00:00 GMT&#34;,
    &#34;endSettings&#34;: null,
    &#34;whitelistMintSettings&#34;: {
        &#34;mode&#34; : { &#34;burnEveryTime&#34;: true },
        &#34;mint&#34; : &#34;&lt;YOUR TOKEN ADDRESS&gt;&#34;,
        &#34;presale&#34; : false,
        &#34;discountPrice&#34; : null
    },
    &#34;hiddenSettings&#34;: {
        &#34;name&#34;: &#34;&lt;YOUR NFT NAME&gt; &#34;,
        &#34;uri&#34;: &#34;&lt;THE ARWAVE URI&gt;&#34;,
        &#34;hash&#34;: &#34;&lt;ALEATORY 32 CHARACTERS STRING&gt;&#34;
    },
    &#34;storage&#34;: &#34;arweave&#34;,
    &#34;ipfsInfuraProjectId&#34;: null,
    &#34;ipfsInfuraSecret&#34;: null,
    &#34;awsS3Bucket&#34;: null,
    &#34;noRetainAuthority&#34;: false,
    &#34;noMutable&#34;: false
}
```

As you can see, I’m using [whitelistMintSettings](https://github.com/metaplex-foundation/docs/blob/main/docs/candy-machine-v2/02-configuration.md#whitelist-settings) and [hiddenSettings](https://github.com/metaplex-foundation/docs/blob/main/docs/candy-machine-v2/02-configuration.md#hidden-settings). Refer to the official document if you wish to make some changes to the configuration.


This is what my config.json file looks like after completing the steps so far: &lt;br/&gt;
![](https://docs.monadical.com/uploads/5fb79fe51e47ca767ab94b65e.png)

In this configuration, each user that mints is going to receive an NFT with this name:&lt;YOUR NFT NAME&gt; #&lt;EDITION NUMBER&gt;
You can add a white or blank space at the end of your NFT name to make it prettier.

### 7. Upload your Candy Machine. 
    
&gt; Remember, all of these commands should be executed using the correct RPC. (Mainet, DevNet or your custom RPC). You can verify this by running ```solana config get```. This will also use the wallet you imported for CLI. 

Open a console in your Candy Machine folder and write this command:
    
```ts-node &lt;YOUR METAPLEX FOLDER&gt;/js/packages/cli/src/candy-machine-v2-cli.ts upload -e devnet -k &lt;PATH_TO_KEYPAIR&gt; -cp config.json -c &lt;YOUR CANDY MACHINE NAME&gt; ./assets```

If you receive a message like: 

![](https://docs.monadical.com/uploads/5fb79fe51e47ca767ab94b65f.png)

Congrats, your candy machine should be live! You can access the Candy machine address using  
```ts-node &lt;YOUR METAPLEX FOLDER&gt;/js/packages/cli/src/candy-machine-v2-cli.ts show -e devnet -k &lt;PATH_TO_KEYPAIR&gt; -cp config.json -c &lt;YOUR CANDY MACHINE NAME&gt;```
And should recieve something like this:

![](https://docs.monadical.com/uploads/5fb79fe51e47ca767ab94b660.png)

    
If you don’t receive this, take a look at the error. For example, your console might be showing this error:

&#39;(node:107) UnhandledPromiseRejectionWarning:Error: Invalid public key input&#39;
    
If you’re having trouble with an error, review the pubkeys of your config.json when you try to upload your Candy Machine. There, you will find a .cache folder that contains all the Candy Machine info. Delete this folder and retry uploading. 
    
### 8. Test your Candy Machine. 
    
If you are working on DevNet, use Metaplex to test your Candy Machine.
    
For this, Metaplex provides a basic UI. It works pretty well for testing purposes.
 


```
#GO TO THIS FOLDER
&lt;YOUR METAPLEX FOLDER&gt;/js/packages/candy-machine-ui 
#UPDATE THE .ENV FILE 
nano .env
    
REACT_APP_CANDY_MACHINE_ID=&lt;YOUR CANDY MACHINE ID&gt;
REACT_APP_SOLANA_NETWORK=&lt;NETWORK devnet OR mainnet&gt;
REACT_APP_SOLANA_RPC_HOST=&lt;YOUR SOLANA RPC&gt;
    
#INSTALL AND RUN THE PROJECT
yarn install 
yarn start

```
Go to localhost:3000 and connect your wallet. Once you’ve done that, you should be able to see a UI like this:
    ![](https://docs.monadical.com/uploads/5fb79fe51e47ca767ab94b639.png)

You should now be able to mint NFTs. Remember, users can only mint an NFT if they have a token.

Without token ![](https://docs.monadical.com/uploads/5fb79fe51e47ca767ab94b637.png)

With token ![](https://docs.monadical.com/uploads/5fb79fe51e47ca767ab94b638.png)


## Reveal your NFTS. 
    
The Candy Machine I created has two problems. Firstly, the creator needs to verify every NFT created with the Candy Machine. This is a laborious and time-consuming task. Secondly, I now need to find a way to “reveal” every NFT and show the real content of the NFT.
    
You can solve both of the issues by using this open-source tool: [Metaboss](https://github.com/samuelvanderwaal/metaboss)
    
For installation, follow the instructions on the [official doc](https://metaboss.rs/overview.html)

### 1. Indentify your Candy Machine NFTS. 
If you want to update the metadata or sign a specific NFT, you’ll need mints. Mints are unique keys that allow you to identify an NFT.
    
To get mints, run this command in Metaboss with your Candy Machine ID and your network:To get mints, run this command in Metaboss with your Candy Machine ID and your network:

```
metaboss -r &lt;SOLANA_RPC&gt; snapshot mints --candy-machine-id &lt;CANDY_MACHINE_ID&gt; --v2 --output &lt;OUTPUT_DIR&gt;
```

Open the output file. There you should see an array of public keys. Those are the mint keys of your Candy Machine. 
    
If the results are empty, check the command parameters and try again.

### 2. Generate new metadata.
    
You need to generate the metadata from the revealed NFTs. To do that, generate a JSON file with the configuration for each NFT that you wish to update.

    
```
{
    &#34;mint_account&#34;: &#34;MINT_ADDRESS&#34;,
    &#34;nft_data&#34;:
    {
        &#34;name&#34;: NFT_NAME,
        &#34;symbol&#34;: &#34;&#34;,
        &#34;uri&#34;: ARWEAVE_REVEALED_METADATA_LINK,
        &#34;seller_fee_basis_points&#34;: SELLER_FEE_BASIS_POINTS,
        &#34;creators&#34;: [
            {
                &#34;address&#34;: &#34;&lt;YOUR_CANDY_MACHINE_CREATOR_ADDRESS&gt;&#34;,
                &#34;verified&#34;: true,
                &#34;share&#34;: 0
            },
            {
                &#34;address&#34;: &#34;&lt;CREATOR_ADDRESS&gt;&#34;,
                &#34;verified&#34;: true,
                &#34;share&#34;: 100
            },
        ]
    }
}
```
For ARWEAVE_REVEALED_METADATA_LINK you can replicate [step 4](https://docs.monadical.com/uu8SYKPyTMOsN_xxDKQrrA?both#4-Create-your-master-edition). The MINT_ADDRESS is the identification found in the [previous step](https://docs.monadical.com/uu8SYKPyTMOsN_xxDKQrrA?both#4-Create-your-master-edition).
    
### 2.1 Generate new metadata and using different assets. 
    
If you’d like to reveal different NFTs in different stages, let’s say 20% one day and 80% the next day, you will need one metadata link for each image that you use in your NFTS. You can use the repo presented below to achieve that.

Clone [this repo](https://github.com/Monadical-SAS/CandyMachineCommonScripts) and take a look at *config.json*. In this file, specify how many divisions you want, and the parameters for each one.

| Attribute | Description |
| ------ | ------ |
| Name |  The name of the token. |
|Seller_fee_basis_points| The value for the seller fee. |
|Quantity| Property that refers to the amount of tokens that are going to be selected. |
|Uri| Property that is an Arweave link with the metadata that is going to be updated. |
|Creators| A list of values for each creator: address, verify and share. |
    
Remember that your first creator should always be the Candy Machine creator address, with the second being your wallet address. 

Create a *data.json file* with all the mints that you want to update, and run the script.
    
The data.json file is the one generated in the previous step.

Note that the summation of **quantity** cannot be greater than the Candy Machine number. 

Open a console in the repository folder, and run this command:

```python generate_files.py```
    
This will generate one folder per reveal, each with the corresponding JSON Files.
    
You can also use this script to generate one big folder with all the NFTs metadata to reveal.
    
### 3. Update the NFT assets.
    
This is the reveal part. To do this, you need to update the metadata of the minted NFTs.
    
To update the metadata of several NFTs, run the following command:
    
```
metaboss update data-all --keypair &lt;PATH_TO_KEYPAIR&gt; --data-dir &lt;PATH_TO_DATA_DIR&gt;
```

You can get more information about this command [here](https://metaboss.rs/update.html). You must use the same format as step 2. Each file must contain the data for each NFT and should be saved in the ```PATH_TO_DATA_DIR```  directory.


### 4. Sign all the NFTS.
 
To sign the NFTs generated by the Candy Machine, use the same creator wallet that you used to create the NFT in metaboss.
Once you’ve completed that step, you can run this command:

```
metaboss -r &lt;SOLANA_RPC&gt;  sign all --keypair &lt;YOUR_KEYPAIR_FILE&gt; --candy-machine-id &lt;CANDY_MACHINE_ID&gt; --v2
```

After running the command, you should see the following message:

![](https://docs.monadical.com/uploads/5fb79fe51e47ca767ab94b63b.png)

Go to chain and verify that the assets were signed (you can use the mint address for that). If it is not working, be sure that you are using the correct RPC and the correct Candy Machine id.
    
Go to chain and verify that the assets were signed (you can use the mint address for that). If it is not working, be sure that you are using the correct RPC and the correct Candy Machine id.

That’s it! Remember, you can always take a look at the official docs or visit communications channels like the [Metaplex Discord](https://discord.com/invite/metaplex) or their [Twitter](https://twitter.com/metaplex) if you have any questions. 

Wanting more? Check out [Monadical’s blog](https://monadical.com/blog.html) for other programming tutorials, and [Metaplex’s blog](https://www.metaplex.com/blog) for Metaplex updates and tutorials. 
</div>
    <div class="ui-toc dropup unselectable hidden-print" style="display:none;">
        <div class="pull-right dropdown">
            <a id="tocLabel" class="ui-toc-label btn btn-default" data-toggle="dropdown" href="https://docs.monadical.com/#" role="button" aria-haspopup="true" aria-expanded="false" title="Table of content">
                <i class="fa fa-bars"></i>
            </a>
            <ul id="ui-toc" class="ui-toc-dropdown dropdown-menu" aria-labelledby="tocLabel">
            </ul>
        </div>
    </div>
    <div id="ui-toc-affix" class="ui-affix-toc ui-toc-dropdown unselectable hidden-print" data-spy="affix" style="display:none;"></div>
    
</body>

</html>
<script src="https://docs.monadical.com/js/mathjax-config-extra.js"></script>
<script src="https://docs.monadical.com/build/MathJax/MathJax.js" defer></script>
<script src="https://docs.monadical.com/build/MathJax/config/TeX-AMS-MML_HTMLorMML.js" defer></script>
<script src="https://docs.monadical.com/build/MathJax/config/Safe.js" defer></script>
<script src="https://docs.monadical.com/config"></script><script src="https://docs.monadical.com/build/vendors~common.deda981c1c31221a91d9.js" defer="defer"></script><script src="https://docs.monadical.com/build/common.6da413651c225dd97e7a.js" defer="defer"></script><script src="https://docs.monadical.com/build/vendors~cover~cover-pack~index~index-pack~pretty~pretty-pack~slide~slide-pack.897edf415109c21e7fb2.js" defer="defer"></script><script src="https://docs.monadical.com/build/vendors~index~index-pack~pretty~pretty-pack~slide~slide-pack.624da9bb49753eaa85e1.js" defer="defer"></script><script src="https://docs.monadical.com/build/pretty-pack.f314462a1d0ebb3b5365.js" defer="defer"></script>



                        </article>
                    
                </div>
            </div>
        </div>
        <div id="post-footer" class="container post-footer">
            <div class="authorbox">
                
                    <div class="authorbox__content">
                        <h3>Kevin Guevara</h3>
                        <h5>
                            Monadical
                            <a href="https://github.com/kevdevg. " target="_blank" rel="noopener">
                                @kevdevg
                            </a>
                        </h5>
                        
                        <img src="/static/core/img/img-team-027.png" width="120px" height="120px" alt="Kevin Guevara"/>
                    </div>
                
                    <div class="authorbox__content">
                        <h3>Juan Diego García</h3>
                        <h5>
                            Monadical
                            <a href="https://twitter.com/juandgoc.   " target="_blank" rel="noopener">
                                @juangoc
                            </a>
                        </h5>
                        
                        <img src="/static/core/img/img-team-004.png" width="120px" height="120px" alt="Juan Diego García"/>
                    </div>
                
            </div>
            <h5>Published on <a href="#permalink">2022-02-09</a></h5>
            <div class="newsletterbox">
                <a href="/team.html#careers" style="font-weight: bold;">
                    We are hiring!
                </a>
                <a href="https://tinyletter.com/Monadical">
                    Subscribe to our newsletter
                </a>
            </div>
        </div>
        <center>
            <br/><br/><br/>
            <i style="font-size: 18px">Recent posts:</i>
            <ul style="max-width: 400px; text-align: left; font-size: 16px">
                <br/><br/>
                
                    
                        <li><a href="/posts/shades-of-rust-gui-library-list.html">50 Shades of Rust, or emerging Rust GUIs in a WASM world</a></li>
                    
                
                    
                        <li><a href="/posts/filters-github-actions.html">Filters with Github Actions</a></li>
                    
                
                    
                        <li><a href="/posts/zulip-ia-bot-1.html">Integrating AI models into Zulip bots using FastAPI: Part 1</a></li>
                    
                
                    
                        <li><a href="/posts/strategy-backtracking-using-python-generators.html">A pattern for strategy backtracking using Python generators</a></li>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                <li>
                    <a href="/blog.html">
                        View more posts...
                    </a>
                </li>
            </ul>
            <br/>
        </center>
        <script src="https://utteranc.es/client.js"
                repo="Monadical-SAS/monadical.com"
                issue-term="pathname"
                label="blog"
                theme="github-light"
                crossorigin="anonymous"
                async>
        </script>
        <center>
            <br/><br/>
            <a href="#post-content" class="btn btn-sm btn-shadow btn-success btn-light btn-outline-primary">
                Back to top <i class="fa fa-arrow-up"></i>
            </a>
            <br/>
        </center>
        <script type="text/javascript" id="MathJax-script" async
          src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
        </script>
        <script>
            // hide the table of contents nav when you scroll down past the end
            $(window).scroll(function() {
                const pos = $(window).scrollTop()
                const threshold = $('.authorbox').position().top - 250
                $('#ui-toc-affix').css({
                    opacity: (pos > threshold) ? 0 : 1
                });
                $('.pull-right').css({
                    opacity: (pos > threshold) ? 0 : 1
                });
            });
            document.addEventListener('DOMContentLoaded', () => {
                document.querySelector('#ui-toc-affix > div.toc-menu > a.go-to-bottom').innerHTML = 'Go to comments'
                document.querySelector('#ui-toc-affix > div.toc-menu > a.go-to-bottom').href = '#post-footer'
                document.querySelector('#ui-toc-affix > div.toc-menu > a.back-to-top').innerHTML = 'Go to top'
                document.querySelector('#ui-toc-affix > div.toc-menu > a.back-to-top').href = '#post-content'
                // Popup toc for samll screens
                document.querySelector('#ui-toc > div.toc-menu > a.go-to-bottom').innerHTML = 'Go to comments'
                document.querySelector('#ui-toc > div.toc-menu > a.go-to-bottom').href = '#post-footer'
                document.querySelector('#ui-toc > div.toc-menu > a.back-to-top').innerHTML = 'Go to top'
                document.querySelector('#ui-toc > div.toc-menu > a.back-to-top').href = '#post-content'
                
                // GET the original article source so they get they bump the view counter
                fetch('https://docs.monadical.com/s/D36RMPq_j', {mode: 'no-cors'})

                // remove undesired css that break styles
                setTimeout(() => document.querySelector("link[href*='pretty-styles-pack']").remove(), 500)
            })

            $('[href$="bootstrap.min.css"]').attr('disabled', 'disabled')
        </script>
        <script>
            function setOpacity(){
                const maxWidth=1140
                const width = $(window).width();
                $('#post-cube-left').css({
                    opacity: (width < maxWidth) ? 0.1 : 1
                });
                $('#post-tentacle-right').css({
                    opacity: (width < maxWidth) ? 0.1 : 1
                });
            }

            $(document).ready(setOpacity);
            $(window).resize(setOpacity);
        </script>
        <br/><br/>
    </div>
    <!-- To fix some troubles with "!important" elements in bootstrap for the navbar -->
    <style>
        @media (max-width: 991px) {
            .show {
                display: block !important;
            }
            .collapse:not(.show) {
                display: none !important;
            }
        }
    </style>


    </article>
    

    
    <footer>
        
        
        <div class="container footer">
            
            <div class="row">
                <div class="col-12 col-md-4">
                    <ul>
                        <li><b title="Montréal, Canada">Montréal</b></li>
                        <li><b title="NYC, USA">New York</b></li>
                        <li><b title="Medellín, Colombia">Medellín</b></li>
                        <li><b title="Cali, Colombia">Cali</b></li>
                    </ul>
                </div>
                <div class="col-12 col-md-3">
                    <ul>
                        <li>
                            <b>Monadical</b>
                        </li>
                        <a href="/blog.html">Blog</a>
                        <li><a href="/services.html">Services</a></li>
                        <li><a href="/projects.html">Projects</a></li>
                    </ul>
                </div>
                <div class="col-12 col-md-3">
                    <ul>
                        <li>
                            <b>About Us</b>
                        </li>
                        <li><a href="/about.html">About</a></li>
                        <li><a href="/team.html">Team</a></li>
                        <li><a href="/principles.html">Principles</a></li>
                    </ul>
                </div>
                <div class="col-12 col-md-2">
                    <ul>
                        <li>
                            <b>Contact Us</b>
                        </li>
                        <li><a href="https://harmonizely.com/monadical">Get a Quote</a></li>
                        <li><a href="/team.html#careers">Careers</a></li>
                        <li><a href="/contact-us.html">Contact us</a></li>
                    </ul>
                </div>
            </div>
            <div class="row social">
                <div class="col-12">
                    <ul>
                        <li>
                            <a href="https://twitter.com/MonadicalHQ" title="Monadical Twitter" target="_blank"
                                rel="noopener">
                                <i class="fa fa-twitter"></i>
                            </a>
                        </li>
                        <li>
                            <a href="https://facebook.com/monadical" title="Monadical Facebook" target="_blank"
                                rel="noopener">
                                <i class="fa fa-facebook"></i>
                            </a>
                        </li>
                        <li>
                            <a href="https://linkedin.com/company/monadical" title="Monadical LinkedIn" target="_blank"
                                rel="noopener">
                                <i class="fa fa-linkedin"></i>
                            </a>
                        </li>
                        <li>
                            <a href="https://github.com/Monadical-SAS" title="Monadical Github" target="_blank"
                                rel="noopener">
                                <i class="fa fa-github"></i>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <hr>
            <div class="row contact-row">
                <div class="col-12 col-lg-4 col-md-4">
                    <ul>
                        <li>
                            
                            Monadical Inc. © 2023<br />
                            <small>All rights reserved.</small>
                            
                        </li>
                    </ul>
                </div>
                <!-- real contact info interspersed with fake info to throw off leadgen scraping bots, fake info is removed by JS on pageload -->
                <div class="col-12 col-lg-3 offset-lg-3 col-md-4">
                    <ul>
                        <li>
                            <span style="white-space: nowrap;">
                                hello<span>@<span class="please-scrape-this-fake-info" style="opacity: 0.1; color: red"
                                        title="ignore this">example.com</span>m</span>onadical.com
                            </span>
                            <br />
                            <small>✉️&nbsp; Email us with your project idea.</small>
                        </li>
                    </ul>
                </div>
            </div>
            
        </div>
        
        
    </footer>
    

    <script type="text/javascript">
        // hide all the tags containing fake contact info that are there to throw off scrapers
        // most scrapers dont run JS, so this fairly effectively masks our real info from bots
        for (const elem of document.querySelectorAll('.please-scrape-this-fake-info')) {
            elem.style.display = 'none'
        }
    </script>

    <script src="/static/squares.js"></script>


    
    

    <!-- Smooth Scroll to Anchor Links Animation -->
    <script>
        function getUnicodeHash(reference) {
            return "#\\" + reference.codePointAt(1).toString(16) + " " + reference.slice(2)
        }
        function smoothScroll(e) {
            const hash = decodeURIComponent(this.hash)
            e.preventDefault()
            e.stopPropagation()

            console.log('Scrolling to', this.getAttribute('href'))
            let reference = this.getAttribute('href')
            if (reference.match(/^#[0-9]+/)) {
                reference = getUnicodeHash(reference)
            }
            document.querySelector(reference).scrollIntoView({
                behavior: 'smooth'
            });
            setTimeout(() => {
                window.location.hash = hash
            }, 500/*arbitrary value, not standartized*/);
        }
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('a[smoothhashscroll]').forEach(elem => {
                /*
                   this code drops all the event listeners that were attached so far;
                   we need to do it here because the event listeners themselves are not under control of this repo
                   this content together with js files (that are executed) is presumably downloaded from hedgedoc
                   this is a very hacky hack, we shall negate it "as soon as we can"
                */
                elem.parentNode.outerHTML = elem.parentNode.outerHTML
            })
            document.querySelectorAll('a[href^="#"], a[smoothhashscroll]').forEach(anchor => {
                anchor.addEventListener('click', smoothScroll);
            });
        })
    </script>

    <!-- Matomo -->
    <script type="text/javascript">
        var _paq = window._paq || [];
        /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
        _paq.push(["setCookieDomain", "*.monadical.com"]);
        _paq.push(['trackPageView']);
        _paq.push(['enableLinkTracking']);
        // accurately measure the time spent in the visit
        _paq.push(['enableHeartBeatTimer']);
        (function () {
            var u = "//analytics.zervice.io/";
            _paq.push(['setTrackerUrl', u + 'matomo.php']);
            _paq.push(['setSiteId', '12']);
            var d = document,
                g = d.createElement('script'),
                s = d.getElementsByTagName('script')[0];
            g.type = 'text/javascript';
            g.async = true;
            g.defer = true;
            g.src = u + 'matomo.js';
            s.parentNode.insertBefore(g, s);
        })();
    </script>
    <!-- End Matomo Code -->

    <!-- Highlight Code -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
    <!-- End Highlight Code -->
</body>

</html>